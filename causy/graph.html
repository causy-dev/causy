<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.1.0"/>
    <title>causy.graph API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../causy.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;causy</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#logger">logger</a>
            </li>
            <li>
                    <a class="class" href="#Node">Node</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Node.__init__">Node</a>
                        </li>
                        <li>
                                <a class="variable" href="#Node.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Node.id">id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Node.values">values</a>
                        </li>
                        <li>
                                <a class="variable" href="#Node.metadata">metadata</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GraphError">GraphError</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#Graph">Graph</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#Graph.nodes">nodes</a>
                        </li>
                        <li>
                                <a class="variable" href="#Graph.edges">edges</a>
                        </li>
                        <li>
                                <a class="variable" href="#Graph.edge_history">edge_history</a>
                        </li>
                        <li>
                                <a class="variable" href="#Graph.action_history">action_history</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.add_edge">add_edge</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.add_directed_edge">add_directed_edge</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.retrieve_edge_history">retrieve_edge_history</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.add_edge_history">add_edge_history</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.remove_edge">remove_edge</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.remove_directed_edge">remove_directed_edge</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.update_edge">update_edge</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.update_directed_edge">update_directed_edge</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.edge_exists">edge_exists</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.directed_edge_exists">directed_edge_exists</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.only_directed_edge_exists">only_directed_edge_exists</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.undirected_edge_exists">undirected_edge_exists</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.bidirected_edge_exists">bidirected_edge_exists</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.edge_value">edge_value</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.add_node">add_node</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.directed_path_exists">directed_path_exists</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.directed_paths">directed_paths</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.parents_of_node">parents_of_node</a>
                        </li>
                        <li>
                                <a class="function" href="#Graph.inducing_path_exists">inducing_path_exists</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#unpack_run">unpack_run</a>
            </li>
            <li>
                    <a class="class" href="#AbstractGraphModel">AbstractGraphModel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AbstractGraphModel.__init__">AbstractGraphModel</a>
                        </li>
                        <li>
                                <a class="variable" href="#AbstractGraphModel.pipeline_steps">pipeline_steps</a>
                        </li>
                        <li>
                                <a class="variable" href="#AbstractGraphModel.graph">graph</a>
                        </li>
                        <li>
                                <a class="variable" href="#AbstractGraphModel.pool">pool</a>
                        </li>
                        <li>
                                <a class="function" href="#AbstractGraphModel.create_graph_from_data">create_graph_from_data</a>
                        </li>
                        <li>
                                <a class="function" href="#AbstractGraphModel.create_all_possible_edges">create_all_possible_edges</a>
                        </li>
                        <li>
                                <a class="function" href="#AbstractGraphModel.execute_pipeline_steps">execute_pipeline_steps</a>
                        </li>
                        <li>
                                <a class="function" href="#AbstractGraphModel.execute_pipeline_step">execute_pipeline_step</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#graph_model_factory">graph_model_factory</a>
            </li>
            <li>
                    <a class="class" href="#Loop">Loop</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Loop.__init__">Loop</a>
                        </li>
                        <li>
                                <a class="function" href="#Loop.execute">execute</a>
                        </li>
                        <li>
                                <a class="variable" href="#Loop.pipeline_steps">pipeline_steps</a>
                        </li>
                        <li>
                                <a class="variable" href="#Loop.exit_condition">exit_condition</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../causy.html">causy</a><wbr>.graph    </h1>

                
                        <input id="mod-graph-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-graph-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span> <span class="nn">uuid</span> <span class="kn">import</span> <span class="n">uuid4</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="kn">import</span> <span class="nn">logging</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="kn">import</span> <span class="nn">torch</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="kn">import</span> <span class="nn">torch.multiprocessing</span> <span class="k">as</span> <span class="nn">mp</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="kn">from</span> <span class="nn">causy.interfaces</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a>    <span class="n">IndependenceTestInterface</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="p">)</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="kn">from</span> <span class="nn">causy.interfaces</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a>    <span class="n">BaseGraphInterface</span><span class="p">,</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a>    <span class="n">NodeInterface</span><span class="p">,</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a>    <span class="n">TestResultAction</span><span class="p">,</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>    <span class="n">TestResult</span><span class="p">,</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a>    <span class="n">GraphModelInterface</span><span class="p">,</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a>    <span class="n">LogicStepInterface</span><span class="p">,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a>    <span class="n">ExitConditionInterface</span><span class="p">,</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="p">)</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="kn">from</span> <span class="nn">causy.utils</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a>    <span class="n">load_pipeline_artefact_by_definition</span><span class="p">,</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>    <span class="n">load_pipeline_steps_by_definition</span><span class="p">,</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="p">)</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="nd">@dataclass</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="k">class</span> <span class="nc">Node</span><span class="p">(</span><span class="n">NodeInterface</span><span class="p">):</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>    <span class="n">values</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>    <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="k">class</span> <span class="nc">GraphError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>    <span class="k">pass</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="k">class</span> <span class="nc">Graph</span><span class="p">(</span><span class="n">BaseGraphInterface</span><span class="p">):</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">    The graph represents the internal data structure of causy. It is a simple graph with nodes and edges.</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">    But it supports to be handled as a directed graph, undirected graph and bidirected graph, which is important to implement different algorithms in different stages.</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">    It also stores the history of the actions taken on the graph.</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>    <span class="n">nodes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">]</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>    <span class="n">edges</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]]</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>    <span class="n">_reverse_edges</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]]</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>    <span class="n">edge_history</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]]</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>    <span class="n">action_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]]]</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">action_history</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>    <span class="k">def</span> <span class="nf">add_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">        Add an edge to the graph</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">        :param u: u node</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">        :param v: v node</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">        :return:</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="s2">&quot;Self loops are currently not allowed&quot;</span><span class="p">)</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>    <span class="k">def</span> <span class="nf">add_directed_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">        Add a directed edge from u to v to the graph</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">        :param u: u node</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">        :param v: v node</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">        :return:</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="s2">&quot;Self loops are currently not allowed&quot;</span><span class="p">)</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">:</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>    <span class="k">def</span> <span class="nf">retrieve_edge_history</span><span class="p">(</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">TestResultAction</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]:</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">        Retrieve the edge history</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">        :param u:</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">        :param v:</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">        :param action:</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a><span class="sd">        :return:</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>        <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">:</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">action</span><span class="p">]</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>    <span class="k">def</span> <span class="nf">add_edge_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">TestResult</span><span class="p">):</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a><span class="sd">        Add an action to the edge history</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a><span class="sd">        :param u:</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a><span class="sd">        :param v:</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="sd">        :param action:</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="sd">        :return:</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">:</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>    <span class="k">def</span> <span class="nf">remove_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="sd">        Remove an edge from the graph (undirected)</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="sd">        :param u: u node</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a><span class="sd">        :param v: v node</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a><span class="sd">        :return:</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>    <span class="k">def</span> <span class="nf">remove_directed_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">        Remove an edge from the graph</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">        :param u: u node</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="sd">        :param v: v node</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a><span class="sd">        :return:</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>            <span class="k">return</span>  <span class="c1"># no edges from u</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>            <span class="k">return</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>    <span class="k">def</span> <span class="nf">update_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        Update an undirected edge in the graph</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">        :param u: u node</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">        :param v: v node</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">        :return:</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not have any edges&quot;</span><span class="p">)</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not have any edges&quot;</span><span class="p">)</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no edge from </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no edge from </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>    <span class="k">def</span> <span class="nf">update_directed_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">        Update an edge in the graph</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">        :param u: u node</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">        :param v: v node</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">        :return:</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not have any edges&quot;</span><span class="p">)</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no edge from </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>    <span class="k">def</span> <span class="nf">edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">        Check if any edge exists between u and v. Cases: u -&gt; v, u &lt;-&gt; v, u &lt;- v</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a><span class="sd">        :param u: node u</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a><span class="sd">        :param v: node v</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a><span class="sd">        :return: True if any edge exists, False otherwise</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>    <span class="k">def</span> <span class="nf">directed_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a><span class="sd">        Check if a directed edge exists between u and v. Cases: u -&gt; v, u &lt;-&gt; v</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a><span class="sd">        :param u: node u</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a><span class="sd">        :param v: node v</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a><span class="sd">        :return: True if a directed edge exists, False otherwise</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>    <span class="k">def</span> <span class="nf">only_directed_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a><span class="sd">        Check if a directed edge exists between u and v, but no directed edge exists between v and u. Case: u -&gt; v</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a><span class="sd">        :param u: node u</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd">        :param v: node v</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a><span class="sd">        :return: True if only directed edge exists, False otherwise</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>    <span class="k">def</span> <span class="nf">undirected_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="sd">        Check if an undirected edge exists between u and v. Note: currently, an undirected edges is implemented just as</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a><span class="sd">        a directed edge. However, they are two functions as they mean different things in different algorithms.</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">        Currently, this function is used in the PC algorithm, where an undirected edge is an edge which could not be</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a><span class="sd">        oriented in any direction by orientation rules.</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a><span class="sd">        Later, a cohersive naming scheme should be implemented.</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">        :param u: node u</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="sd">        :param v: node v</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a><span class="sd">        :return: True if an undirected edge exists, False otherwise</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>    <span class="k">def</span> <span class="nf">bidirected_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="sd">        Check if a bidirected edge exists between u and v. Note: currently, a bidirected edges is implemented just as</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="sd">        an undirected edge. However, they are two functions as they mean different things in different algorithms.</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="sd">        This function will be used for the FCI algorithm for now, where a bidirected edge is an edge between two nodes</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">        that have been identified to have a common cause by orientation rules.</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="sd">        Later, a cohersive naming scheme should be implemented.</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a><span class="sd">        :param u: node u</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a><span class="sd">        :param v: node v</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">        :return: True if a bidirected edge exists, False otherwise</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>    <span class="k">def</span> <span class="nf">edge_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="sd">        retrieve the value of an edge</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="sd">        :param u:</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="sd">        :param v:</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a><span class="sd">        :return:</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>    <span class="k">def</span> <span class="nf">add_node</span><span class="p">(</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>        <span class="n">values</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">],</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>        <span class="n">id_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>        <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a><span class="sd">        Add a node to the graph</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a><span class="sd">        :param name: name of the node</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="sd">        :param values: values of the node</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="sd">        :param id_: id_ of the node</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a><span class="sd">        :param : node</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a><span class="sd">        :return: created Node</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>        <span class="k">if</span> <span class="n">id_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>            <span class="n">id_</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>        <span class="k">if</span> <span class="n">id_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node with id </span><span class="si">{</span><span class="n">id_</span><span class="si">}</span><span class="s2"> already exists&quot;</span><span class="p">)</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">):</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>            <span class="n">tensor_values</span> <span class="o">=</span> <span class="n">values</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>                <span class="n">tensor_values</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>            <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Currently only numeric values are supported. </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>        <span class="k">if</span> <span class="n">metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>            <span class="n">metadata</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">tensor_values</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">)</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>        <span class="k">return</span> <span class="n">node</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>    <span class="k">def</span> <span class="nf">directed_path_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a><span class="sd">        Check if a directed path from u to v exists</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a><span class="sd">        :param u: node u</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a><span class="sd">        :param v: node v</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="sd">        :return: True if a directed path exists, False otherwise</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_path_exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">],</span> <span class="n">v</span><span class="p">):</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>    <span class="k">def</span> <span class="nf">directed_paths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a><span class="sd">        Return all directed paths from u to v</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a><span class="sd">        :param u: node u</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a><span class="sd">        :param v: node v</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a><span class="sd">        :return: list of directed paths</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>        <span class="c1"># TODO: try a better data structure for this</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a>            <span class="k">return</span> <span class="p">[[(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)]]</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a>        <span class="n">paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">]):</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>                <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_paths</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">],</span> <span class="n">v</span><span class="p">):</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>                    <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">([(</span><span class="n">u</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">])]</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>        <span class="k">return</span> <span class="n">paths</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>    <span class="k">def</span> <span class="nf">parents_of_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a><span class="sd">        Return all parents of a node u</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="sd">        :param u: node u</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">        :return: list of nodes (parents)</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>    <span class="k">def</span> <span class="nf">inducing_path_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a><span class="sd">        Check if an inducing path from u to v exists.</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a><span class="sd">        An inducing path from u to v is a directed path from u to v on which all mediators are colliders.</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a><span class="sd">        :param u: node u</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a><span class="sd">        :param v: node v</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a><span class="sd">        :return: True if an inducing path exists, False otherwise</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_path_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_paths</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>                <span class="n">r</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bidirected_edge_exists</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>                    <span class="c1"># TODO: check if this is correct (@sof)</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a><span class="k">def</span> <span class="nf">unpack_run</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>    <span class="n">tst</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>    <span class="k">del</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>    <span class="k">return</span> <span class="n">tst</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a><span class="k">class</span> <span class="nc">AbstractGraphModel</span><span class="p">(</span><span class="n">GraphModelInterface</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a><span class="sd">    The graph model is the main class of causy. It is responsible for creating a graph from data and executing the pipeline_steps.</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a><span class="sd">    The graph model is responsible for the following tasks:</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a><span class="sd">    - Create a graph from data (create_graph_from_data)</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a><span class="sd">    - Execute the pipeline_steps (execute_pipeline_steps)</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a><span class="sd">    - Take actions on the graph (execute_pipeline_step &amp; _take_action which is called by execute_pipeline_step)</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a><span class="sd">    It also initializes and takes care of the multiprocessing pool.</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>    <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>    <span class="n">graph</span><span class="p">:</span> <span class="n">BaseGraphInterface</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>    <span class="n">pool</span><span class="p">:</span> <span class="n">mp</span><span class="o">.</span><span class="n">Pool</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a>        <span class="n">graph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>        <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>    <span class="p">):</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span> <span class="o">=</span> <span class="n">pipeline_steps</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>    <span class="k">def</span> <span class="nf">create_graph_from_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]):</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a><span class="sd">        Create a graph from data</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a><span class="sd">        :param data: is a list of dictionaries</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a><span class="sd">        :return:</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>        <span class="c1"># initialize nodes</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>        <span class="n">keys</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>        <span class="n">nodes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>            <span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>        <span class="c1"># load nodes into node dict</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>                <span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>        <span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>            <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>        <span class="k">return</span> <span class="n">graph</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>    <span class="k">def</span> <span class="nf">create_all_possible_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a><span class="sd">        Create all possible edges on a graph</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a><span class="sd">        TODO: replace me with the skeleton builders</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a><span class="sd">        :return:</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>                <span class="k">if</span> <span class="n">u</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>                    <span class="k">continue</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>    <span class="k">def</span> <span class="nf">execute_pipeline_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a><span class="sd">        Execute all pipeline_steps</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a><span class="sd">        :return: the steps taken during the step execution</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>        <span class="n">action_history</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>        <span class="k">for</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span><span class="p">:</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing pipeline step </span><span class="si">{</span><span class="nb">filter</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">filter</span><span class="p">,</span> <span class="n">LogicStepInterface</span><span class="p">):</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>                <span class="nb">filter</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>                <span class="k">continue</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_pipeline_step</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>            <span class="n">action_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>                <span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="nb">filter</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">}</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>            <span class="p">)</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>        <span class="k">return</span> <span class="n">action_history</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>    <span class="k">def</span> <span class="nf">_format_yield</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_fn</span><span class="p">,</span> <span class="n">graph</span><span class="p">,</span> <span class="n">generator</span><span class="p">):</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a><span class="sd">        Format the yield for the parallel processing</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a><span class="sd">        :param test_fn: the pipeline_step test function</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a><span class="sd">        :param graph: the graph</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a><span class="sd">        :param generator: the generator object which generates the combinations</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a><span class="sd">        :return: yields the test function with its inputs</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">generator</span><span class="p">:</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a>            <span class="k">yield</span> <span class="p">[</span><span class="n">test_fn</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">i</span><span class="p">],</span> <span class="n">graph</span><span class="p">]</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a>    <span class="k">def</span> <span class="nf">_take_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">):</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a><span class="sd">        Take the actions returned by the test</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a><span class="sd">        In causy changes on the graph are not executed directly. Instead, the test returns an action which should be executed on the graph.</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a><span class="sd">        This is done to make it possible to execute the tests in parallel as well as to decide proactively at which point in the decisions taken by the pipeline step should be executed.</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a><span class="sd">        Actions are returned by the test and are executed on the graph. The actions are stored in the action history to make it possible to revert the actions or use them in a later step.</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a><span class="sd">        :param results:</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a><span class="sd">        :return:</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a>        <span class="n">actions_taken</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>        <span class="k">for</span> <span class="n">result_items</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>            <span class="k">if</span> <span class="n">result_items</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a>                <span class="k">continue</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result_items</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>                <span class="n">result_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">result_items</span><span class="p">]</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result_items</span><span class="p">:</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>                <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Action: </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">action</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>                <span class="c1"># execute the action returned by the test</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>                <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">REMOVE_EDGE_UNDIRECTED</span><span class="p">:</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">undirected_edge_exists</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">):</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a>                            <span class="sa">f</span><span class="s2">&quot;Tried to remove undirected edge </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &lt;-&gt; </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. But it does not exist.&quot;</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a>                        <span class="p">)</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>                        <span class="k">continue</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">remove_edge</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>                <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">UPDATE_EDGE</span><span class="p">:</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">edge_exists</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">):</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>                            <span class="sa">f</span><span class="s2">&quot;Tried to update edge </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. But it does not exist.&quot;</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>                        <span class="p">)</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>                        <span class="k">continue</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">update_edge</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>                <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">UPDATE_EDGE_DIRECTED</span><span class="p">:</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">):</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>                            <span class="sa">f</span><span class="s2">&quot;Tried to update directed edge </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. But it does not exist.&quot;</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>                        <span class="p">)</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>                        <span class="k">continue</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">update_directed_edge</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a>                <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">DO_NOTHING</span><span class="p">:</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a>                    <span class="k">continue</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>                <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">REMOVE_EDGE_DIRECTED</span><span class="p">:</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">):</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>                            <span class="sa">f</span><span class="s2">&quot;Tried to remove directed edge </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. But it does not exist.&quot;</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>                        <span class="p">)</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>                        <span class="k">continue</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">remove_directed_edge</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a>                <span class="c1"># add the action to the actions history</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a>                <span class="n">actions_taken</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a>        <span class="k">return</span> <span class="n">actions_taken</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>    <span class="k">def</span> <span class="nf">execute_pipeline_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_fn</span><span class="p">:</span> <span class="n">IndependenceTestInterface</span><span class="p">):</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a><span class="sd">        Execute a single pipeline_step on the graph. either in parallel or in a single process depending on the test_fn.parallel flag</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a><span class="sd">        :param test_fn: the test function</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a><span class="sd">        :param threshold: the threshold</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a><span class="sd">        :return:</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a>        <span class="n">actions_taken</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a>        <span class="c1"># initialize the worker pool (we currently use all available cores * 2)</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a>        <span class="c1"># run all combinations in parallel except if the number of combinations is smaller then the chunk size</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a>        <span class="c1"># because then we would create more overhead then we would definetly gain from parallel processing</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a>        <span class="k">if</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a>            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">imap_unordered</span><span class="p">(</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a>                <span class="n">unpack_run</span><span class="p">,</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_format_yield</span><span class="p">(</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>                    <span class="n">test_fn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a>                <span class="p">),</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a>                <span class="n">chunksize</span><span class="o">=</span><span class="n">test_fn</span><span class="o">.</span><span class="n">chunk_size_parallel_processing</span><span class="p">,</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a>            <span class="p">):</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a>                    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a>                <span class="n">actions_taken</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_take_action</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a>            <span class="k">if</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">chunked</span><span class="p">:</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a>                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">):</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a>                    <span class="n">iterator</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a>                        <span class="n">unpack_run</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a>                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[[</span><span class="n">test_fn</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">c</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">]</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a>                    <span class="p">]</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a>                    <span class="n">actions_taken</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_take_action</span><span class="p">(</span><span class="n">iterator</span><span class="p">))</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a>                <span class="n">iterator</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a>                    <span class="n">unpack_run</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a>                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a>                        <span class="p">[</span><span class="n">test_fn</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">]</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a>                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a>                    <span class="p">]</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a>                <span class="p">]</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a>                <span class="n">actions_taken</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_take_action</span><span class="p">(</span><span class="n">iterator</span><span class="p">))</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">action_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>            <span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">test_fn</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">actions_taken</span><span class="p">}</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>        <span class="p">)</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a>        <span class="k">return</span> <span class="n">actions_taken</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a><span class="k">def</span> <span class="nf">graph_model_factory</span><span class="p">(</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a>    <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">AbstractGraphModel</span><span class="p">]:</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a><span class="sd">    Create a graph model based on a List of pipeline_steps</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a><span class="sd">    :param pipeline_steps: a list of pipeline_steps which should be applied to the graph</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a><span class="sd">    :return: the graph model</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a>    <span class="k">class</span> <span class="nc">GraphModel</span><span class="p">(</span><span class="n">AbstractGraphModel</span><span class="p">):</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a>        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a>            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="o">=</span><span class="n">pipeline_steps</span><span class="p">)</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a>    <span class="k">return</span> <span class="n">GraphModel</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a><span class="k">class</span> <span class="nc">Loop</span><span class="p">(</span><span class="n">LogicStepInterface</span><span class="p">):</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a><span class="sd">    A loop which executes a list of pipeline_steps until the exit_condition is met.</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="n">BaseGraphInterface</span><span class="p">,</span> <span class="n">graph_model_instance_</span><span class="p">:</span> <span class="n">GraphModelInterface</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a>    <span class="p">):</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a><span class="sd">        Executes the loop til self.exit_condition is met</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a><span class="sd">        :param graph:</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a><span class="sd">        :param graph_model_instance_:</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a><span class="sd">        :return:</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a>        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a>        <span class="n">steps</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit_condition</span><span class="p">(</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a>            <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">,</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a>            <span class="n">graph_model_instance_</span><span class="o">=</span><span class="n">graph_model_instance_</span><span class="p">,</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a>            <span class="n">actions_taken</span><span class="o">=</span><span class="n">steps</span><span class="p">,</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a>            <span class="n">iteration</span><span class="o">=</span><span class="n">n</span><span class="p">,</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a>        <span class="p">):</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a>            <span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a>            <span class="k">for</span> <span class="n">pipeline_step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span><span class="p">:</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">graph_model_instance_</span><span class="o">.</span><span class="n">execute_pipeline_step</span><span class="p">(</span><span class="n">pipeline_step</span><span class="p">)</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a>                <span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a>            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a>        <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a>        <span class="n">exit_condition</span><span class="p">:</span> <span class="n">ExitConditionInterface</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a>    <span class="p">):</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a>        <span class="c1"># TODO check if this is a good idea</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exit_condition</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a>            <span class="n">exit_condition</span> <span class="o">=</span> <span class="n">load_pipeline_artefact_by_definition</span><span class="p">(</span><span class="n">exit_condition</span><span class="p">)</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a>        <span class="c1"># TODO: check if this is a good idea</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a>            <span class="n">pipeline_steps</span> <span class="o">=</span> <span class="n">load_pipeline_steps_by_definition</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="p">)</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a>
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span> <span class="o">=</span> <span class="n">pipeline_steps</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">exit_condition</span> <span class="o">=</span> <span class="n">exit_condition</span>
</span></pre></div>


            </section>
                <section id="logger">
                    <div class="attr variable">
            <span class="name">logger</span>        =
<span class="default_value">&lt;Logger <a href="">causy.graph</a> (WARNING)&gt;</span>

        
    </div>
    <a class="headerlink" href="#logger"></a>
    
    

                </section>
                <section id="Node">
                            <input id="Node-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@dataclass</div>

    <span class="def">class</span>
    <span class="name">Node</span><wbr>(<span class="base"><a href="interfaces.html#NodeInterface">causy.interfaces.NodeInterface</a></span>):

                <label class="view-source-button" for="Node-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Node"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Node-31"><a href="#Node-31"><span class="linenos">31</span></a><span class="nd">@dataclass</span>
</span><span id="Node-32"><a href="#Node-32"><span class="linenos">32</span></a><span class="k">class</span> <span class="nc">Node</span><span class="p">(</span><span class="n">NodeInterface</span><span class="p">):</span>
</span><span id="Node-33"><a href="#Node-33"><span class="linenos">33</span></a>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Node-34"><a href="#Node-34"><span class="linenos">34</span></a>    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="Node-35"><a href="#Node-35"><span class="linenos">35</span></a>    <span class="n">values</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span>
</span><span id="Node-36"><a href="#Node-36"><span class="linenos">36</span></a>    <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Node-37"><a href="#Node-37"><span class="linenos">37</span></a>
</span><span id="Node-38"><a href="#Node-38"><span class="linenos">38</span></a>    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Node-39"><a href="#Node-39"><span class="linenos">39</span></a>        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span></pre></div>


    

                            <div id="Node.__init__" class="classattr">
                                <div class="attr function">
            
        <span class="name">Node</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">values</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span>,</span><span class="param">	<span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="nb">any</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

        
    </div>
    <a class="headerlink" href="#Node.__init__"></a>
    
    

                            </div>
                            <div id="Node.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Node.name"></a>
    
    

                            </div>
                            <div id="Node.id" class="classattr">
                                <div class="attr variable">
            <span class="name">id</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Node.id"></a>
    
    

                            </div>
                            <div id="Node.values" class="classattr">
                                <div class="attr variable">
            <span class="name">values</span><span class="annotation">: torch.Tensor</span>

        
    </div>
    <a class="headerlink" href="#Node.values"></a>
    
    

                            </div>
                            <div id="Node.metadata" class="classattr">
                                <div class="attr variable">
            <span class="name">metadata</span><span class="annotation">: Dict[str, &lt;built-in function any&gt;]</span>        =
<span class="default_value">None</span>

        
    </div>
    <a class="headerlink" href="#Node.metadata"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="interfaces.html#NodeInterface">causy.interfaces.NodeInterface</a></dt>
                                <dd id="Node.serialize" class="function"><a href="interfaces.html#NodeInterface.serialize">serialize</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="GraphError">
                            <input id="GraphError-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GraphError</span><wbr>(<span class="base">builtins.Exception</span>):

                <label class="view-source-button" for="GraphError-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GraphError"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GraphError-42"><a href="#GraphError-42"><span class="linenos">42</span></a><span class="k">class</span> <span class="nc">GraphError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
</span><span id="GraphError-43"><a href="#GraphError-43"><span class="linenos">43</span></a>    <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Common base class for all non-exit exceptions.</p>
</div>


                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>builtins.Exception</dt>
                                <dd id="GraphError.__init__" class="function">Exception</dd>

            </div>
            <div><dt>builtins.BaseException</dt>
                                <dd id="GraphError.with_traceback" class="function">with_traceback</dd>
                <dd id="GraphError.add_note" class="function">add_note</dd>
                <dd id="GraphError.args" class="variable">args</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Graph">
                            <input id="Graph-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Graph</span><wbr>(<span class="base"><a href="interfaces.html#BaseGraphInterface">causy.interfaces.BaseGraphInterface</a></span>):

                <label class="view-source-button" for="Graph-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph-46"><a href="#Graph-46"><span class="linenos"> 46</span></a><span class="k">class</span> <span class="nc">Graph</span><span class="p">(</span><span class="n">BaseGraphInterface</span><span class="p">):</span>
</span><span id="Graph-47"><a href="#Graph-47"><span class="linenos"> 47</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-48"><a href="#Graph-48"><span class="linenos"> 48</span></a><span class="sd">    The graph represents the internal data structure of causy. It is a simple graph with nodes and edges.</span>
</span><span id="Graph-49"><a href="#Graph-49"><span class="linenos"> 49</span></a><span class="sd">    But it supports to be handled as a directed graph, undirected graph and bidirected graph, which is important to implement different algorithms in different stages.</span>
</span><span id="Graph-50"><a href="#Graph-50"><span class="linenos"> 50</span></a><span class="sd">    It also stores the history of the actions taken on the graph.</span>
</span><span id="Graph-51"><a href="#Graph-51"><span class="linenos"> 51</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Graph-52"><a href="#Graph-52"><span class="linenos"> 52</span></a>
</span><span id="Graph-53"><a href="#Graph-53"><span class="linenos"> 53</span></a>    <span class="n">nodes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">]</span>
</span><span id="Graph-54"><a href="#Graph-54"><span class="linenos"> 54</span></a>    <span class="n">edges</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]]</span>
</span><span id="Graph-55"><a href="#Graph-55"><span class="linenos"> 55</span></a>    <span class="n">_reverse_edges</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">]]</span>
</span><span id="Graph-56"><a href="#Graph-56"><span class="linenos"> 56</span></a>    <span class="n">edge_history</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]]</span>
</span><span id="Graph-57"><a href="#Graph-57"><span class="linenos"> 57</span></a>    <span class="n">action_history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]]]</span>
</span><span id="Graph-58"><a href="#Graph-58"><span class="linenos"> 58</span></a>
</span><span id="Graph-59"><a href="#Graph-59"><span class="linenos"> 59</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Graph-60"><a href="#Graph-60"><span class="linenos"> 60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-61"><a href="#Graph-61"><span class="linenos"> 61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-62"><a href="#Graph-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-63"><a href="#Graph-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-64"><a href="#Graph-64"><span class="linenos"> 64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">action_history</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph-65"><a href="#Graph-65"><span class="linenos"> 65</span></a>
</span><span id="Graph-66"><a href="#Graph-66"><span class="linenos"> 66</span></a>    <span class="k">def</span> <span class="nf">add_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="Graph-67"><a href="#Graph-67"><span class="linenos"> 67</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-68"><a href="#Graph-68"><span class="linenos"> 68</span></a><span class="sd">        Add an edge to the graph</span>
</span><span id="Graph-69"><a href="#Graph-69"><span class="linenos"> 69</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph-70"><a href="#Graph-70"><span class="linenos"> 70</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph-71"><a href="#Graph-71"><span class="linenos"> 71</span></a><span class="sd">        :return:</span>
</span><span id="Graph-72"><a href="#Graph-72"><span class="linenos"> 72</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-73"><a href="#Graph-73"><span class="linenos"> 73</span></a>
</span><span id="Graph-74"><a href="#Graph-74"><span class="linenos"> 74</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-75"><a href="#Graph-75"><span class="linenos"> 75</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-76"><a href="#Graph-76"><span class="linenos"> 76</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-77"><a href="#Graph-77"><span class="linenos"> 77</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-78"><a href="#Graph-78"><span class="linenos"> 78</span></a>
</span><span id="Graph-79"><a href="#Graph-79"><span class="linenos"> 79</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span id="Graph-80"><a href="#Graph-80"><span class="linenos"> 80</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="s2">&quot;Self loops are currently not allowed&quot;</span><span class="p">)</span>
</span><span id="Graph-81"><a href="#Graph-81"><span class="linenos"> 81</span></a>
</span><span id="Graph-82"><a href="#Graph-82"><span class="linenos"> 82</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph-83"><a href="#Graph-83"><span class="linenos"> 83</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-84"><a href="#Graph-84"><span class="linenos"> 84</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-85"><a href="#Graph-85"><span class="linenos"> 85</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph-86"><a href="#Graph-86"><span class="linenos"> 86</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-87"><a href="#Graph-87"><span class="linenos"> 87</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-88"><a href="#Graph-88"><span class="linenos"> 88</span></a>
</span><span id="Graph-89"><a href="#Graph-89"><span class="linenos"> 89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-90"><a href="#Graph-90"><span class="linenos"> 90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-91"><a href="#Graph-91"><span class="linenos"> 91</span></a>
</span><span id="Graph-92"><a href="#Graph-92"><span class="linenos"> 92</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-93"><a href="#Graph-93"><span class="linenos"> 93</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-94"><a href="#Graph-94"><span class="linenos"> 94</span></a>
</span><span id="Graph-95"><a href="#Graph-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph-96"><a href="#Graph-96"><span class="linenos"> 96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph-97"><a href="#Graph-97"><span class="linenos"> 97</span></a>
</span><span id="Graph-98"><a href="#Graph-98"><span class="linenos"> 98</span></a>    <span class="k">def</span> <span class="nf">add_directed_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="Graph-99"><a href="#Graph-99"><span class="linenos"> 99</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-100"><a href="#Graph-100"><span class="linenos">100</span></a><span class="sd">        Add a directed edge from u to v to the graph</span>
</span><span id="Graph-101"><a href="#Graph-101"><span class="linenos">101</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph-102"><a href="#Graph-102"><span class="linenos">102</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph-103"><a href="#Graph-103"><span class="linenos">103</span></a><span class="sd">        :return:</span>
</span><span id="Graph-104"><a href="#Graph-104"><span class="linenos">104</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-105"><a href="#Graph-105"><span class="linenos">105</span></a>
</span><span id="Graph-106"><a href="#Graph-106"><span class="linenos">106</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-107"><a href="#Graph-107"><span class="linenos">107</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-108"><a href="#Graph-108"><span class="linenos">108</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-109"><a href="#Graph-109"><span class="linenos">109</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-110"><a href="#Graph-110"><span class="linenos">110</span></a>
</span><span id="Graph-111"><a href="#Graph-111"><span class="linenos">111</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span id="Graph-112"><a href="#Graph-112"><span class="linenos">112</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="s2">&quot;Self loops are currently not allowed&quot;</span><span class="p">)</span>
</span><span id="Graph-113"><a href="#Graph-113"><span class="linenos">113</span></a>
</span><span id="Graph-114"><a href="#Graph-114"><span class="linenos">114</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph-115"><a href="#Graph-115"><span class="linenos">115</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-116"><a href="#Graph-116"><span class="linenos">116</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">:</span>
</span><span id="Graph-117"><a href="#Graph-117"><span class="linenos">117</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-118"><a href="#Graph-118"><span class="linenos">118</span></a>
</span><span id="Graph-119"><a href="#Graph-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-120"><a href="#Graph-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-121"><a href="#Graph-121"><span class="linenos">121</span></a>
</span><span id="Graph-122"><a href="#Graph-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph-123"><a href="#Graph-123"><span class="linenos">123</span></a>
</span><span id="Graph-124"><a href="#Graph-124"><span class="linenos">124</span></a>    <span class="k">def</span> <span class="nf">retrieve_edge_history</span><span class="p">(</span>
</span><span id="Graph-125"><a href="#Graph-125"><span class="linenos">125</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">TestResultAction</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Graph-126"><a href="#Graph-126"><span class="linenos">126</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]:</span>
</span><span id="Graph-127"><a href="#Graph-127"><span class="linenos">127</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-128"><a href="#Graph-128"><span class="linenos">128</span></a><span class="sd">        Retrieve the edge history</span>
</span><span id="Graph-129"><a href="#Graph-129"><span class="linenos">129</span></a><span class="sd">        :param u:</span>
</span><span id="Graph-130"><a href="#Graph-130"><span class="linenos">130</span></a><span class="sd">        :param v:</span>
</span><span id="Graph-131"><a href="#Graph-131"><span class="linenos">131</span></a><span class="sd">        :param action:</span>
</span><span id="Graph-132"><a href="#Graph-132"><span class="linenos">132</span></a><span class="sd">        :return:</span>
</span><span id="Graph-133"><a href="#Graph-133"><span class="linenos">133</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-134"><a href="#Graph-134"><span class="linenos">134</span></a>        <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-135"><a href="#Graph-135"><span class="linenos">135</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
</span><span id="Graph-136"><a href="#Graph-136"><span class="linenos">136</span></a>
</span><span id="Graph-137"><a href="#Graph-137"><span class="linenos">137</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">:</span>
</span><span id="Graph-138"><a href="#Graph-138"><span class="linenos">138</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="Graph-139"><a href="#Graph-139"><span class="linenos">139</span></a>
</span><span id="Graph-140"><a href="#Graph-140"><span class="linenos">140</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">action</span><span class="p">]</span>
</span><span id="Graph-141"><a href="#Graph-141"><span class="linenos">141</span></a>
</span><span id="Graph-142"><a href="#Graph-142"><span class="linenos">142</span></a>    <span class="k">def</span> <span class="nf">add_edge_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">TestResult</span><span class="p">):</span>
</span><span id="Graph-143"><a href="#Graph-143"><span class="linenos">143</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-144"><a href="#Graph-144"><span class="linenos">144</span></a><span class="sd">        Add an action to the edge history</span>
</span><span id="Graph-145"><a href="#Graph-145"><span class="linenos">145</span></a><span class="sd">        :param u:</span>
</span><span id="Graph-146"><a href="#Graph-146"><span class="linenos">146</span></a><span class="sd">        :param v:</span>
</span><span id="Graph-147"><a href="#Graph-147"><span class="linenos">147</span></a><span class="sd">        :param action:</span>
</span><span id="Graph-148"><a href="#Graph-148"><span class="linenos">148</span></a><span class="sd">        :return:</span>
</span><span id="Graph-149"><a href="#Graph-149"><span class="linenos">149</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-150"><a href="#Graph-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">:</span>
</span><span id="Graph-151"><a href="#Graph-151"><span class="linenos">151</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph-152"><a href="#Graph-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</span><span id="Graph-153"><a href="#Graph-153"><span class="linenos">153</span></a>
</span><span id="Graph-154"><a href="#Graph-154"><span class="linenos">154</span></a>    <span class="k">def</span> <span class="nf">remove_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-155"><a href="#Graph-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-156"><a href="#Graph-156"><span class="linenos">156</span></a><span class="sd">        Remove an edge from the graph (undirected)</span>
</span><span id="Graph-157"><a href="#Graph-157"><span class="linenos">157</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph-158"><a href="#Graph-158"><span class="linenos">158</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph-159"><a href="#Graph-159"><span class="linenos">159</span></a><span class="sd">        :return:</span>
</span><span id="Graph-160"><a href="#Graph-160"><span class="linenos">160</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-161"><a href="#Graph-161"><span class="linenos">161</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-162"><a href="#Graph-162"><span class="linenos">162</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-163"><a href="#Graph-163"><span class="linenos">163</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-164"><a href="#Graph-164"><span class="linenos">164</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-165"><a href="#Graph-165"><span class="linenos">165</span></a>
</span><span id="Graph-166"><a href="#Graph-166"><span class="linenos">166</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-167"><a href="#Graph-167"><span class="linenos">167</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph-168"><a href="#Graph-168"><span class="linenos">168</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph-169"><a href="#Graph-169"><span class="linenos">169</span></a>
</span><span id="Graph-170"><a href="#Graph-170"><span class="linenos">170</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-171"><a href="#Graph-171"><span class="linenos">171</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph-172"><a href="#Graph-172"><span class="linenos">172</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph-173"><a href="#Graph-173"><span class="linenos">173</span></a>
</span><span id="Graph-174"><a href="#Graph-174"><span class="linenos">174</span></a>    <span class="k">def</span> <span class="nf">remove_directed_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-175"><a href="#Graph-175"><span class="linenos">175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-176"><a href="#Graph-176"><span class="linenos">176</span></a><span class="sd">        Remove an edge from the graph</span>
</span><span id="Graph-177"><a href="#Graph-177"><span class="linenos">177</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph-178"><a href="#Graph-178"><span class="linenos">178</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph-179"><a href="#Graph-179"><span class="linenos">179</span></a><span class="sd">        :return:</span>
</span><span id="Graph-180"><a href="#Graph-180"><span class="linenos">180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-181"><a href="#Graph-181"><span class="linenos">181</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-182"><a href="#Graph-182"><span class="linenos">182</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-183"><a href="#Graph-183"><span class="linenos">183</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-184"><a href="#Graph-184"><span class="linenos">184</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-185"><a href="#Graph-185"><span class="linenos">185</span></a>
</span><span id="Graph-186"><a href="#Graph-186"><span class="linenos">186</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph-187"><a href="#Graph-187"><span class="linenos">187</span></a>            <span class="k">return</span>  <span class="c1"># no edges from u</span>
</span><span id="Graph-188"><a href="#Graph-188"><span class="linenos">188</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-189"><a href="#Graph-189"><span class="linenos">189</span></a>            <span class="k">return</span>
</span><span id="Graph-190"><a href="#Graph-190"><span class="linenos">190</span></a>
</span><span id="Graph-191"><a href="#Graph-191"><span class="linenos">191</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph-192"><a href="#Graph-192"><span class="linenos">192</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph-193"><a href="#Graph-193"><span class="linenos">193</span></a>
</span><span id="Graph-194"><a href="#Graph-194"><span class="linenos">194</span></a>    <span class="k">def</span> <span class="nf">update_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="Graph-195"><a href="#Graph-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-196"><a href="#Graph-196"><span class="linenos">196</span></a><span class="sd">        Update an undirected edge in the graph</span>
</span><span id="Graph-197"><a href="#Graph-197"><span class="linenos">197</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph-198"><a href="#Graph-198"><span class="linenos">198</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph-199"><a href="#Graph-199"><span class="linenos">199</span></a><span class="sd">        :return:</span>
</span><span id="Graph-200"><a href="#Graph-200"><span class="linenos">200</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-201"><a href="#Graph-201"><span class="linenos">201</span></a>
</span><span id="Graph-202"><a href="#Graph-202"><span class="linenos">202</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-203"><a href="#Graph-203"><span class="linenos">203</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-204"><a href="#Graph-204"><span class="linenos">204</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-205"><a href="#Graph-205"><span class="linenos">205</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-206"><a href="#Graph-206"><span class="linenos">206</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph-207"><a href="#Graph-207"><span class="linenos">207</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not have any edges&quot;</span><span class="p">)</span>
</span><span id="Graph-208"><a href="#Graph-208"><span class="linenos">208</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph-209"><a href="#Graph-209"><span class="linenos">209</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not have any edges&quot;</span><span class="p">)</span>
</span><span id="Graph-210"><a href="#Graph-210"><span class="linenos">210</span></a>
</span><span id="Graph-211"><a href="#Graph-211"><span class="linenos">211</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-212"><a href="#Graph-212"><span class="linenos">212</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no edge from </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph-213"><a href="#Graph-213"><span class="linenos">213</span></a>
</span><span id="Graph-214"><a href="#Graph-214"><span class="linenos">214</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-215"><a href="#Graph-215"><span class="linenos">215</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no edge from </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph-216"><a href="#Graph-216"><span class="linenos">216</span></a>
</span><span id="Graph-217"><a href="#Graph-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-218"><a href="#Graph-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-219"><a href="#Graph-219"><span class="linenos">219</span></a>
</span><span id="Graph-220"><a href="#Graph-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-221"><a href="#Graph-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-222"><a href="#Graph-222"><span class="linenos">222</span></a>
</span><span id="Graph-223"><a href="#Graph-223"><span class="linenos">223</span></a>    <span class="k">def</span> <span class="nf">update_directed_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="Graph-224"><a href="#Graph-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-225"><a href="#Graph-225"><span class="linenos">225</span></a><span class="sd">        Update an edge in the graph</span>
</span><span id="Graph-226"><a href="#Graph-226"><span class="linenos">226</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph-227"><a href="#Graph-227"><span class="linenos">227</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph-228"><a href="#Graph-228"><span class="linenos">228</span></a><span class="sd">        :return:</span>
</span><span id="Graph-229"><a href="#Graph-229"><span class="linenos">229</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-230"><a href="#Graph-230"><span class="linenos">230</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-231"><a href="#Graph-231"><span class="linenos">231</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-232"><a href="#Graph-232"><span class="linenos">232</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-233"><a href="#Graph-233"><span class="linenos">233</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph-234"><a href="#Graph-234"><span class="linenos">234</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph-235"><a href="#Graph-235"><span class="linenos">235</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not have any edges&quot;</span><span class="p">)</span>
</span><span id="Graph-236"><a href="#Graph-236"><span class="linenos">236</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-237"><a href="#Graph-237"><span class="linenos">237</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no edge from </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph-238"><a href="#Graph-238"><span class="linenos">238</span></a>
</span><span id="Graph-239"><a href="#Graph-239"><span class="linenos">239</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-240"><a href="#Graph-240"><span class="linenos">240</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph-241"><a href="#Graph-241"><span class="linenos">241</span></a>
</span><span id="Graph-242"><a href="#Graph-242"><span class="linenos">242</span></a>    <span class="k">def</span> <span class="nf">edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-243"><a href="#Graph-243"><span class="linenos">243</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-244"><a href="#Graph-244"><span class="linenos">244</span></a><span class="sd">        Check if any edge exists between u and v. Cases: u -&gt; v, u &lt;-&gt; v, u &lt;- v</span>
</span><span id="Graph-245"><a href="#Graph-245"><span class="linenos">245</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph-246"><a href="#Graph-246"><span class="linenos">246</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph-247"><a href="#Graph-247"><span class="linenos">247</span></a><span class="sd">        :return: True if any edge exists, False otherwise</span>
</span><span id="Graph-248"><a href="#Graph-248"><span class="linenos">248</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-249"><a href="#Graph-249"><span class="linenos">249</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-250"><a href="#Graph-250"><span class="linenos">250</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-251"><a href="#Graph-251"><span class="linenos">251</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-252"><a href="#Graph-252"><span class="linenos">252</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-253"><a href="#Graph-253"><span class="linenos">253</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-254"><a href="#Graph-254"><span class="linenos">254</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph-255"><a href="#Graph-255"><span class="linenos">255</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-256"><a href="#Graph-256"><span class="linenos">256</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph-257"><a href="#Graph-257"><span class="linenos">257</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-258"><a href="#Graph-258"><span class="linenos">258</span></a>
</span><span id="Graph-259"><a href="#Graph-259"><span class="linenos">259</span></a>    <span class="k">def</span> <span class="nf">directed_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-260"><a href="#Graph-260"><span class="linenos">260</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-261"><a href="#Graph-261"><span class="linenos">261</span></a><span class="sd">        Check if a directed edge exists between u and v. Cases: u -&gt; v, u &lt;-&gt; v</span>
</span><span id="Graph-262"><a href="#Graph-262"><span class="linenos">262</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph-263"><a href="#Graph-263"><span class="linenos">263</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph-264"><a href="#Graph-264"><span class="linenos">264</span></a><span class="sd">        :return: True if a directed edge exists, False otherwise</span>
</span><span id="Graph-265"><a href="#Graph-265"><span class="linenos">265</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-266"><a href="#Graph-266"><span class="linenos">266</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-267"><a href="#Graph-267"><span class="linenos">267</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-268"><a href="#Graph-268"><span class="linenos">268</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-269"><a href="#Graph-269"><span class="linenos">269</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-270"><a href="#Graph-270"><span class="linenos">270</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph-271"><a href="#Graph-271"><span class="linenos">271</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-272"><a href="#Graph-272"><span class="linenos">272</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-273"><a href="#Graph-273"><span class="linenos">273</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-274"><a href="#Graph-274"><span class="linenos">274</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph-275"><a href="#Graph-275"><span class="linenos">275</span></a>
</span><span id="Graph-276"><a href="#Graph-276"><span class="linenos">276</span></a>    <span class="k">def</span> <span class="nf">only_directed_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-277"><a href="#Graph-277"><span class="linenos">277</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-278"><a href="#Graph-278"><span class="linenos">278</span></a><span class="sd">        Check if a directed edge exists between u and v, but no directed edge exists between v and u. Case: u -&gt; v</span>
</span><span id="Graph-279"><a href="#Graph-279"><span class="linenos">279</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph-280"><a href="#Graph-280"><span class="linenos">280</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph-281"><a href="#Graph-281"><span class="linenos">281</span></a><span class="sd">        :return: True if only directed edge exists, False otherwise</span>
</span><span id="Graph-282"><a href="#Graph-282"><span class="linenos">282</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-283"><a href="#Graph-283"><span class="linenos">283</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
</span><span id="Graph-284"><a href="#Graph-284"><span class="linenos">284</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph-285"><a href="#Graph-285"><span class="linenos">285</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-286"><a href="#Graph-286"><span class="linenos">286</span></a>
</span><span id="Graph-287"><a href="#Graph-287"><span class="linenos">287</span></a>    <span class="k">def</span> <span class="nf">undirected_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-288"><a href="#Graph-288"><span class="linenos">288</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-289"><a href="#Graph-289"><span class="linenos">289</span></a><span class="sd">        Check if an undirected edge exists between u and v. Note: currently, an undirected edges is implemented just as</span>
</span><span id="Graph-290"><a href="#Graph-290"><span class="linenos">290</span></a><span class="sd">        a directed edge. However, they are two functions as they mean different things in different algorithms.</span>
</span><span id="Graph-291"><a href="#Graph-291"><span class="linenos">291</span></a><span class="sd">        Currently, this function is used in the PC algorithm, where an undirected edge is an edge which could not be</span>
</span><span id="Graph-292"><a href="#Graph-292"><span class="linenos">292</span></a><span class="sd">        oriented in any direction by orientation rules.</span>
</span><span id="Graph-293"><a href="#Graph-293"><span class="linenos">293</span></a><span class="sd">        Later, a cohersive naming scheme should be implemented.</span>
</span><span id="Graph-294"><a href="#Graph-294"><span class="linenos">294</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph-295"><a href="#Graph-295"><span class="linenos">295</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph-296"><a href="#Graph-296"><span class="linenos">296</span></a><span class="sd">        :return: True if an undirected edge exists, False otherwise</span>
</span><span id="Graph-297"><a href="#Graph-297"><span class="linenos">297</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-298"><a href="#Graph-298"><span class="linenos">298</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
</span><span id="Graph-299"><a href="#Graph-299"><span class="linenos">299</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph-300"><a href="#Graph-300"><span class="linenos">300</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-301"><a href="#Graph-301"><span class="linenos">301</span></a>
</span><span id="Graph-302"><a href="#Graph-302"><span class="linenos">302</span></a>    <span class="k">def</span> <span class="nf">bidirected_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-303"><a href="#Graph-303"><span class="linenos">303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-304"><a href="#Graph-304"><span class="linenos">304</span></a><span class="sd">        Check if a bidirected edge exists between u and v. Note: currently, a bidirected edges is implemented just as</span>
</span><span id="Graph-305"><a href="#Graph-305"><span class="linenos">305</span></a><span class="sd">        an undirected edge. However, they are two functions as they mean different things in different algorithms.</span>
</span><span id="Graph-306"><a href="#Graph-306"><span class="linenos">306</span></a><span class="sd">        This function will be used for the FCI algorithm for now, where a bidirected edge is an edge between two nodes</span>
</span><span id="Graph-307"><a href="#Graph-307"><span class="linenos">307</span></a><span class="sd">        that have been identified to have a common cause by orientation rules.</span>
</span><span id="Graph-308"><a href="#Graph-308"><span class="linenos">308</span></a><span class="sd">        Later, a cohersive naming scheme should be implemented.</span>
</span><span id="Graph-309"><a href="#Graph-309"><span class="linenos">309</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph-310"><a href="#Graph-310"><span class="linenos">310</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph-311"><a href="#Graph-311"><span class="linenos">311</span></a><span class="sd">        :return: True if a bidirected edge exists, False otherwise</span>
</span><span id="Graph-312"><a href="#Graph-312"><span class="linenos">312</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-313"><a href="#Graph-313"><span class="linenos">313</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
</span><span id="Graph-314"><a href="#Graph-314"><span class="linenos">314</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph-315"><a href="#Graph-315"><span class="linenos">315</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-316"><a href="#Graph-316"><span class="linenos">316</span></a>
</span><span id="Graph-317"><a href="#Graph-317"><span class="linenos">317</span></a>    <span class="k">def</span> <span class="nf">edge_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
</span><span id="Graph-318"><a href="#Graph-318"><span class="linenos">318</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-319"><a href="#Graph-319"><span class="linenos">319</span></a><span class="sd">        retrieve the value of an edge</span>
</span><span id="Graph-320"><a href="#Graph-320"><span class="linenos">320</span></a><span class="sd">        :param u:</span>
</span><span id="Graph-321"><a href="#Graph-321"><span class="linenos">321</span></a><span class="sd">        :param v:</span>
</span><span id="Graph-322"><a href="#Graph-322"><span class="linenos">322</span></a><span class="sd">        :return:</span>
</span><span id="Graph-323"><a href="#Graph-323"><span class="linenos">323</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-324"><a href="#Graph-324"><span class="linenos">324</span></a>
</span><span id="Graph-325"><a href="#Graph-325"><span class="linenos">325</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph-326"><a href="#Graph-326"><span class="linenos">326</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="Graph-327"><a href="#Graph-327"><span class="linenos">327</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-328"><a href="#Graph-328"><span class="linenos">328</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="Graph-329"><a href="#Graph-329"><span class="linenos">329</span></a>
</span><span id="Graph-330"><a href="#Graph-330"><span class="linenos">330</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph-331"><a href="#Graph-331"><span class="linenos">331</span></a>
</span><span id="Graph-332"><a href="#Graph-332"><span class="linenos">332</span></a>    <span class="k">def</span> <span class="nf">add_node</span><span class="p">(</span>
</span><span id="Graph-333"><a href="#Graph-333"><span class="linenos">333</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Graph-334"><a href="#Graph-334"><span class="linenos">334</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Graph-335"><a href="#Graph-335"><span class="linenos">335</span></a>        <span class="n">values</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">],</span>
</span><span id="Graph-336"><a href="#Graph-336"><span class="linenos">336</span></a>        <span class="n">id_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Graph-337"><a href="#Graph-337"><span class="linenos">337</span></a>        <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Graph-338"><a href="#Graph-338"><span class="linenos">338</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="Graph-339"><a href="#Graph-339"><span class="linenos">339</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-340"><a href="#Graph-340"><span class="linenos">340</span></a><span class="sd">        Add a node to the graph</span>
</span><span id="Graph-341"><a href="#Graph-341"><span class="linenos">341</span></a><span class="sd">        :param name: name of the node</span>
</span><span id="Graph-342"><a href="#Graph-342"><span class="linenos">342</span></a><span class="sd">        :param values: values of the node</span>
</span><span id="Graph-343"><a href="#Graph-343"><span class="linenos">343</span></a><span class="sd">        :param id_: id_ of the node</span>
</span><span id="Graph-344"><a href="#Graph-344"><span class="linenos">344</span></a><span class="sd">        :param : node</span>
</span><span id="Graph-345"><a href="#Graph-345"><span class="linenos">345</span></a>
</span><span id="Graph-346"><a href="#Graph-346"><span class="linenos">346</span></a><span class="sd">        :return: created Node</span>
</span><span id="Graph-347"><a href="#Graph-347"><span class="linenos">347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-348"><a href="#Graph-348"><span class="linenos">348</span></a>        <span class="k">if</span> <span class="n">id_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-349"><a href="#Graph-349"><span class="linenos">349</span></a>            <span class="n">id_</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
</span><span id="Graph-350"><a href="#Graph-350"><span class="linenos">350</span></a>
</span><span id="Graph-351"><a href="#Graph-351"><span class="linenos">351</span></a>        <span class="k">if</span> <span class="n">id_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph-352"><a href="#Graph-352"><span class="linenos">352</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node with id </span><span class="si">{</span><span class="n">id_</span><span class="si">}</span><span class="s2"> already exists&quot;</span><span class="p">)</span>
</span><span id="Graph-353"><a href="#Graph-353"><span class="linenos">353</span></a>
</span><span id="Graph-354"><a href="#Graph-354"><span class="linenos">354</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">):</span>
</span><span id="Graph-355"><a href="#Graph-355"><span class="linenos">355</span></a>            <span class="n">tensor_values</span> <span class="o">=</span> <span class="n">values</span>
</span><span id="Graph-356"><a href="#Graph-356"><span class="linenos">356</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Graph-357"><a href="#Graph-357"><span class="linenos">357</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Graph-358"><a href="#Graph-358"><span class="linenos">358</span></a>                <span class="n">tensor_values</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</span><span id="Graph-359"><a href="#Graph-359"><span class="linenos">359</span></a>            <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Graph-360"><a href="#Graph-360"><span class="linenos">360</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Currently only numeric values are supported. </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph-361"><a href="#Graph-361"><span class="linenos">361</span></a>
</span><span id="Graph-362"><a href="#Graph-362"><span class="linenos">362</span></a>        <span class="k">if</span> <span class="n">metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph-363"><a href="#Graph-363"><span class="linenos">363</span></a>            <span class="n">metadata</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph-364"><a href="#Graph-364"><span class="linenos">364</span></a>
</span><span id="Graph-365"><a href="#Graph-365"><span class="linenos">365</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">tensor_values</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">)</span>
</span><span id="Graph-366"><a href="#Graph-366"><span class="linenos">366</span></a>
</span><span id="Graph-367"><a href="#Graph-367"><span class="linenos">367</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
</span><span id="Graph-368"><a href="#Graph-368"><span class="linenos">368</span></a>        <span class="k">return</span> <span class="n">node</span>
</span><span id="Graph-369"><a href="#Graph-369"><span class="linenos">369</span></a>
</span><span id="Graph-370"><a href="#Graph-370"><span class="linenos">370</span></a>    <span class="k">def</span> <span class="nf">directed_path_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-371"><a href="#Graph-371"><span class="linenos">371</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-372"><a href="#Graph-372"><span class="linenos">372</span></a><span class="sd">        Check if a directed path from u to v exists</span>
</span><span id="Graph-373"><a href="#Graph-373"><span class="linenos">373</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph-374"><a href="#Graph-374"><span class="linenos">374</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph-375"><a href="#Graph-375"><span class="linenos">375</span></a><span class="sd">        :return: True if a directed path exists, False otherwise</span>
</span><span id="Graph-376"><a href="#Graph-376"><span class="linenos">376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-377"><a href="#Graph-377"><span class="linenos">377</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph-378"><a href="#Graph-378"><span class="linenos">378</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph-379"><a href="#Graph-379"><span class="linenos">379</span></a>        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-380"><a href="#Graph-380"><span class="linenos">380</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_path_exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">],</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph-381"><a href="#Graph-381"><span class="linenos">381</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph-382"><a href="#Graph-382"><span class="linenos">382</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-383"><a href="#Graph-383"><span class="linenos">383</span></a>
</span><span id="Graph-384"><a href="#Graph-384"><span class="linenos">384</span></a>    <span class="k">def</span> <span class="nf">directed_paths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-385"><a href="#Graph-385"><span class="linenos">385</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-386"><a href="#Graph-386"><span class="linenos">386</span></a><span class="sd">        Return all directed paths from u to v</span>
</span><span id="Graph-387"><a href="#Graph-387"><span class="linenos">387</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph-388"><a href="#Graph-388"><span class="linenos">388</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph-389"><a href="#Graph-389"><span class="linenos">389</span></a><span class="sd">        :return: list of directed paths</span>
</span><span id="Graph-390"><a href="#Graph-390"><span class="linenos">390</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-391"><a href="#Graph-391"><span class="linenos">391</span></a>        <span class="c1"># TODO: try a better data structure for this</span>
</span><span id="Graph-392"><a href="#Graph-392"><span class="linenos">392</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph-393"><a href="#Graph-393"><span class="linenos">393</span></a>            <span class="k">return</span> <span class="p">[[(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)]]</span>
</span><span id="Graph-394"><a href="#Graph-394"><span class="linenos">394</span></a>        <span class="n">paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph-395"><a href="#Graph-395"><span class="linenos">395</span></a>        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph-396"><a href="#Graph-396"><span class="linenos">396</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">]):</span>
</span><span id="Graph-397"><a href="#Graph-397"><span class="linenos">397</span></a>                <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_paths</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">],</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph-398"><a href="#Graph-398"><span class="linenos">398</span></a>                    <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">([(</span><span class="n">u</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">])]</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Graph-399"><a href="#Graph-399"><span class="linenos">399</span></a>        <span class="k">return</span> <span class="n">paths</span>
</span><span id="Graph-400"><a href="#Graph-400"><span class="linenos">400</span></a>
</span><span id="Graph-401"><a href="#Graph-401"><span class="linenos">401</span></a>    <span class="k">def</span> <span class="nf">parents_of_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-402"><a href="#Graph-402"><span class="linenos">402</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-403"><a href="#Graph-403"><span class="linenos">403</span></a><span class="sd">        Return all parents of a node u</span>
</span><span id="Graph-404"><a href="#Graph-404"><span class="linenos">404</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph-405"><a href="#Graph-405"><span class="linenos">405</span></a><span class="sd">        :return: list of nodes (parents)</span>
</span><span id="Graph-406"><a href="#Graph-406"><span class="linenos">406</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-407"><a href="#Graph-407"><span class="linenos">407</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span><span id="Graph-408"><a href="#Graph-408"><span class="linenos">408</span></a>
</span><span id="Graph-409"><a href="#Graph-409"><span class="linenos">409</span></a>    <span class="k">def</span> <span class="nf">inducing_path_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph-410"><a href="#Graph-410"><span class="linenos">410</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph-411"><a href="#Graph-411"><span class="linenos">411</span></a><span class="sd">        Check if an inducing path from u to v exists.</span>
</span><span id="Graph-412"><a href="#Graph-412"><span class="linenos">412</span></a><span class="sd">        An inducing path from u to v is a directed path from u to v on which all mediators are colliders.</span>
</span><span id="Graph-413"><a href="#Graph-413"><span class="linenos">413</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph-414"><a href="#Graph-414"><span class="linenos">414</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph-415"><a href="#Graph-415"><span class="linenos">415</span></a><span class="sd">        :return: True if an inducing path exists, False otherwise</span>
</span><span id="Graph-416"><a href="#Graph-416"><span class="linenos">416</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph-417"><a href="#Graph-417"><span class="linenos">417</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_path_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph-418"><a href="#Graph-418"><span class="linenos">418</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph-419"><a href="#Graph-419"><span class="linenos">419</span></a>        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_paths</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph-420"><a href="#Graph-420"><span class="linenos">420</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Graph-421"><a href="#Graph-421"><span class="linenos">421</span></a>                <span class="n">r</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="Graph-422"><a href="#Graph-422"><span class="linenos">422</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bidirected_edge_exists</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
</span><span id="Graph-423"><a href="#Graph-423"><span class="linenos">423</span></a>                    <span class="c1"># TODO: check if this is correct (@sof)</span>
</span><span id="Graph-424"><a href="#Graph-424"><span class="linenos">424</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph-425"><a href="#Graph-425"><span class="linenos">425</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>The graph represents the internal data structure of causy. It is a simple graph with nodes and edges.
But it supports to be handled as a directed graph, undirected graph and bidirected graph, which is important to implement different algorithms in different stages.
It also stores the history of the actions taken on the graph.</p>
</div>


                            <div id="Graph.nodes" class="classattr">
                                <div class="attr variable">
            <span class="name">nodes</span><span class="annotation">: Dict[str, <a href="#Node">Node</a>]</span>

        
    </div>
    <a class="headerlink" href="#Graph.nodes"></a>
    
    

                            </div>
                            <div id="Graph.edges" class="classattr">
                                <div class="attr variable">
            <span class="name">edges</span><span class="annotation">: Dict[str, Dict[str, Dict]]</span>

        
    </div>
    <a class="headerlink" href="#Graph.edges"></a>
    
    

                            </div>
                            <div id="Graph.edge_history" class="classattr">
                                <div class="attr variable">
            <span class="name">edge_history</span><span class="annotation">: Dict[Tuple[str, str], List[<a href="interfaces.html#TestResult">causy.interfaces.TestResult</a>]]</span>

        
    </div>
    <a class="headerlink" href="#Graph.edge_history"></a>
    
    

                            </div>
                            <div id="Graph.action_history" class="classattr">
                                <div class="attr variable">
            <span class="name">action_history</span><span class="annotation">: List[Dict[str, List[<a href="interfaces.html#TestResult">causy.interfaces.TestResult</a>]]]</span>

        
    </div>
    <a class="headerlink" href="#Graph.action_history"></a>
    
    

                            </div>
                            <div id="Graph.add_edge" class="classattr">
                                        <input id="Graph.add_edge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_edge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="n">Dict</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.add_edge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.add_edge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.add_edge-66"><a href="#Graph.add_edge-66"><span class="linenos">66</span></a>    <span class="k">def</span> <span class="nf">add_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="Graph.add_edge-67"><a href="#Graph.add_edge-67"><span class="linenos">67</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.add_edge-68"><a href="#Graph.add_edge-68"><span class="linenos">68</span></a><span class="sd">        Add an edge to the graph</span>
</span><span id="Graph.add_edge-69"><a href="#Graph.add_edge-69"><span class="linenos">69</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph.add_edge-70"><a href="#Graph.add_edge-70"><span class="linenos">70</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph.add_edge-71"><a href="#Graph.add_edge-71"><span class="linenos">71</span></a><span class="sd">        :return:</span>
</span><span id="Graph.add_edge-72"><a href="#Graph.add_edge-72"><span class="linenos">72</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.add_edge-73"><a href="#Graph.add_edge-73"><span class="linenos">73</span></a>
</span><span id="Graph.add_edge-74"><a href="#Graph.add_edge-74"><span class="linenos">74</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.add_edge-75"><a href="#Graph.add_edge-75"><span class="linenos">75</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.add_edge-76"><a href="#Graph.add_edge-76"><span class="linenos">76</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.add_edge-77"><a href="#Graph.add_edge-77"><span class="linenos">77</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.add_edge-78"><a href="#Graph.add_edge-78"><span class="linenos">78</span></a>
</span><span id="Graph.add_edge-79"><a href="#Graph.add_edge-79"><span class="linenos">79</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span id="Graph.add_edge-80"><a href="#Graph.add_edge-80"><span class="linenos">80</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="s2">&quot;Self loops are currently not allowed&quot;</span><span class="p">)</span>
</span><span id="Graph.add_edge-81"><a href="#Graph.add_edge-81"><span class="linenos">81</span></a>
</span><span id="Graph.add_edge-82"><a href="#Graph.add_edge-82"><span class="linenos">82</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph.add_edge-83"><a href="#Graph.add_edge-83"><span class="linenos">83</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph.add_edge-84"><a href="#Graph.add_edge-84"><span class="linenos">84</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph.add_edge-85"><a href="#Graph.add_edge-85"><span class="linenos">85</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph.add_edge-86"><a href="#Graph.add_edge-86"><span class="linenos">86</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph.add_edge-87"><a href="#Graph.add_edge-87"><span class="linenos">87</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph.add_edge-88"><a href="#Graph.add_edge-88"><span class="linenos">88</span></a>
</span><span id="Graph.add_edge-89"><a href="#Graph.add_edge-89"><span class="linenos">89</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.add_edge-90"><a href="#Graph.add_edge-90"><span class="linenos">90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.add_edge-91"><a href="#Graph.add_edge-91"><span class="linenos">91</span></a>
</span><span id="Graph.add_edge-92"><a href="#Graph.add_edge-92"><span class="linenos">92</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.add_edge-93"><a href="#Graph.add_edge-93"><span class="linenos">93</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.add_edge-94"><a href="#Graph.add_edge-94"><span class="linenos">94</span></a>
</span><span id="Graph.add_edge-95"><a href="#Graph.add_edge-95"><span class="linenos">95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph.add_edge-96"><a href="#Graph.add_edge-96"><span class="linenos">96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Add an edge to the graph</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  u node</li>
<li><strong>v</strong>:  v node</li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Graph.add_directed_edge" class="classattr">
                                        <input id="Graph.add_directed_edge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_directed_edge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="n">Dict</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.add_directed_edge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.add_directed_edge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.add_directed_edge-98"><a href="#Graph.add_directed_edge-98"><span class="linenos"> 98</span></a>    <span class="k">def</span> <span class="nf">add_directed_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="Graph.add_directed_edge-99"><a href="#Graph.add_directed_edge-99"><span class="linenos"> 99</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.add_directed_edge-100"><a href="#Graph.add_directed_edge-100"><span class="linenos">100</span></a><span class="sd">        Add a directed edge from u to v to the graph</span>
</span><span id="Graph.add_directed_edge-101"><a href="#Graph.add_directed_edge-101"><span class="linenos">101</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph.add_directed_edge-102"><a href="#Graph.add_directed_edge-102"><span class="linenos">102</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph.add_directed_edge-103"><a href="#Graph.add_directed_edge-103"><span class="linenos">103</span></a><span class="sd">        :return:</span>
</span><span id="Graph.add_directed_edge-104"><a href="#Graph.add_directed_edge-104"><span class="linenos">104</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.add_directed_edge-105"><a href="#Graph.add_directed_edge-105"><span class="linenos">105</span></a>
</span><span id="Graph.add_directed_edge-106"><a href="#Graph.add_directed_edge-106"><span class="linenos">106</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.add_directed_edge-107"><a href="#Graph.add_directed_edge-107"><span class="linenos">107</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.add_directed_edge-108"><a href="#Graph.add_directed_edge-108"><span class="linenos">108</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.add_directed_edge-109"><a href="#Graph.add_directed_edge-109"><span class="linenos">109</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.add_directed_edge-110"><a href="#Graph.add_directed_edge-110"><span class="linenos">110</span></a>
</span><span id="Graph.add_directed_edge-111"><a href="#Graph.add_directed_edge-111"><span class="linenos">111</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">:</span>
</span><span id="Graph.add_directed_edge-112"><a href="#Graph.add_directed_edge-112"><span class="linenos">112</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="s2">&quot;Self loops are currently not allowed&quot;</span><span class="p">)</span>
</span><span id="Graph.add_directed_edge-113"><a href="#Graph.add_directed_edge-113"><span class="linenos">113</span></a>
</span><span id="Graph.add_directed_edge-114"><a href="#Graph.add_directed_edge-114"><span class="linenos">114</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph.add_directed_edge-115"><a href="#Graph.add_directed_edge-115"><span class="linenos">115</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph.add_directed_edge-116"><a href="#Graph.add_directed_edge-116"><span class="linenos">116</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">:</span>
</span><span id="Graph.add_directed_edge-117"><a href="#Graph.add_directed_edge-117"><span class="linenos">117</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph.add_directed_edge-118"><a href="#Graph.add_directed_edge-118"><span class="linenos">118</span></a>
</span><span id="Graph.add_directed_edge-119"><a href="#Graph.add_directed_edge-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.add_directed_edge-120"><a href="#Graph.add_directed_edge-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.add_directed_edge-121"><a href="#Graph.add_directed_edge-121"><span class="linenos">121</span></a>
</span><span id="Graph.add_directed_edge-122"><a href="#Graph.add_directed_edge-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>Add a directed edge from u to v to the graph</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  u node</li>
<li><strong>v</strong>:  v node</li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Graph.retrieve_edge_history" class="classattr">
                                        <input id="Graph.retrieve_edge_history-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">retrieve_edge_history</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">u</span>,</span><span class="param">	<span class="n">v</span>,</span><span class="param">	<span class="n">action</span><span class="p">:</span> <span class="n"><a href="interfaces.html#TestResultAction">causy.interfaces.TestResultAction</a></span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n"><a href="interfaces.html#TestResult">causy.interfaces.TestResult</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Graph.retrieve_edge_history-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.retrieve_edge_history"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.retrieve_edge_history-124"><a href="#Graph.retrieve_edge_history-124"><span class="linenos">124</span></a>    <span class="k">def</span> <span class="nf">retrieve_edge_history</span><span class="p">(</span>
</span><span id="Graph.retrieve_edge_history-125"><a href="#Graph.retrieve_edge_history-125"><span class="linenos">125</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">TestResultAction</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Graph.retrieve_edge_history-126"><a href="#Graph.retrieve_edge_history-126"><span class="linenos">126</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TestResult</span><span class="p">]:</span>
</span><span id="Graph.retrieve_edge_history-127"><a href="#Graph.retrieve_edge_history-127"><span class="linenos">127</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.retrieve_edge_history-128"><a href="#Graph.retrieve_edge_history-128"><span class="linenos">128</span></a><span class="sd">        Retrieve the edge history</span>
</span><span id="Graph.retrieve_edge_history-129"><a href="#Graph.retrieve_edge_history-129"><span class="linenos">129</span></a><span class="sd">        :param u:</span>
</span><span id="Graph.retrieve_edge_history-130"><a href="#Graph.retrieve_edge_history-130"><span class="linenos">130</span></a><span class="sd">        :param v:</span>
</span><span id="Graph.retrieve_edge_history-131"><a href="#Graph.retrieve_edge_history-131"><span class="linenos">131</span></a><span class="sd">        :param action:</span>
</span><span id="Graph.retrieve_edge_history-132"><a href="#Graph.retrieve_edge_history-132"><span class="linenos">132</span></a><span class="sd">        :return:</span>
</span><span id="Graph.retrieve_edge_history-133"><a href="#Graph.retrieve_edge_history-133"><span class="linenos">133</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.retrieve_edge_history-134"><a href="#Graph.retrieve_edge_history-134"><span class="linenos">134</span></a>        <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph.retrieve_edge_history-135"><a href="#Graph.retrieve_edge_history-135"><span class="linenos">135</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
</span><span id="Graph.retrieve_edge_history-136"><a href="#Graph.retrieve_edge_history-136"><span class="linenos">136</span></a>
</span><span id="Graph.retrieve_edge_history-137"><a href="#Graph.retrieve_edge_history-137"><span class="linenos">137</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">:</span>
</span><span id="Graph.retrieve_edge_history-138"><a href="#Graph.retrieve_edge_history-138"><span class="linenos">138</span></a>            <span class="k">return</span> <span class="p">[]</span>
</span><span id="Graph.retrieve_edge_history-139"><a href="#Graph.retrieve_edge_history-139"><span class="linenos">139</span></a>
</span><span id="Graph.retrieve_edge_history-140"><a href="#Graph.retrieve_edge_history-140"><span class="linenos">140</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">action</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the edge history</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>: </li>
<li><strong>v</strong>: </li>
<li><strong>action</strong>: </li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Graph.add_edge_history" class="classattr">
                                        <input id="Graph.add_edge_history-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_edge_history</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span>, </span><span class="param"><span class="n">v</span>, </span><span class="param"><span class="n">action</span><span class="p">:</span> <span class="n"><a href="interfaces.html#TestResult">causy.interfaces.TestResult</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.add_edge_history-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.add_edge_history"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.add_edge_history-142"><a href="#Graph.add_edge_history-142"><span class="linenos">142</span></a>    <span class="k">def</span> <span class="nf">add_edge_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">action</span><span class="p">:</span> <span class="n">TestResult</span><span class="p">):</span>
</span><span id="Graph.add_edge_history-143"><a href="#Graph.add_edge_history-143"><span class="linenos">143</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.add_edge_history-144"><a href="#Graph.add_edge_history-144"><span class="linenos">144</span></a><span class="sd">        Add an action to the edge history</span>
</span><span id="Graph.add_edge_history-145"><a href="#Graph.add_edge_history-145"><span class="linenos">145</span></a><span class="sd">        :param u:</span>
</span><span id="Graph.add_edge_history-146"><a href="#Graph.add_edge_history-146"><span class="linenos">146</span></a><span class="sd">        :param v:</span>
</span><span id="Graph.add_edge_history-147"><a href="#Graph.add_edge_history-147"><span class="linenos">147</span></a><span class="sd">        :param action:</span>
</span><span id="Graph.add_edge_history-148"><a href="#Graph.add_edge_history-148"><span class="linenos">148</span></a><span class="sd">        :return:</span>
</span><span id="Graph.add_edge_history-149"><a href="#Graph.add_edge_history-149"><span class="linenos">149</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.add_edge_history-150"><a href="#Graph.add_edge_history-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">:</span>
</span><span id="Graph.add_edge_history-151"><a href="#Graph.add_edge_history-151"><span class="linenos">151</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph.add_edge_history-152"><a href="#Graph.add_edge_history-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edge_history</span><span class="p">[(</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Add an action to the edge history</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>: </li>
<li><strong>v</strong>: </li>
<li><strong>action</strong>: </li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Graph.remove_edge" class="classattr">
                                        <input id="Graph.remove_edge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_edge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.remove_edge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.remove_edge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.remove_edge-154"><a href="#Graph.remove_edge-154"><span class="linenos">154</span></a>    <span class="k">def</span> <span class="nf">remove_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.remove_edge-155"><a href="#Graph.remove_edge-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.remove_edge-156"><a href="#Graph.remove_edge-156"><span class="linenos">156</span></a><span class="sd">        Remove an edge from the graph (undirected)</span>
</span><span id="Graph.remove_edge-157"><a href="#Graph.remove_edge-157"><span class="linenos">157</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph.remove_edge-158"><a href="#Graph.remove_edge-158"><span class="linenos">158</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph.remove_edge-159"><a href="#Graph.remove_edge-159"><span class="linenos">159</span></a><span class="sd">        :return:</span>
</span><span id="Graph.remove_edge-160"><a href="#Graph.remove_edge-160"><span class="linenos">160</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.remove_edge-161"><a href="#Graph.remove_edge-161"><span class="linenos">161</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.remove_edge-162"><a href="#Graph.remove_edge-162"><span class="linenos">162</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.remove_edge-163"><a href="#Graph.remove_edge-163"><span class="linenos">163</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.remove_edge-164"><a href="#Graph.remove_edge-164"><span class="linenos">164</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.remove_edge-165"><a href="#Graph.remove_edge-165"><span class="linenos">165</span></a>
</span><span id="Graph.remove_edge-166"><a href="#Graph.remove_edge-166"><span class="linenos">166</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.remove_edge-167"><a href="#Graph.remove_edge-167"><span class="linenos">167</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph.remove_edge-168"><a href="#Graph.remove_edge-168"><span class="linenos">168</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph.remove_edge-169"><a href="#Graph.remove_edge-169"><span class="linenos">169</span></a>
</span><span id="Graph.remove_edge-170"><a href="#Graph.remove_edge-170"><span class="linenos">170</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.remove_edge-171"><a href="#Graph.remove_edge-171"><span class="linenos">171</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph.remove_edge-172"><a href="#Graph.remove_edge-172"><span class="linenos">172</span></a>            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Remove an edge from the graph (undirected)</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  u node</li>
<li><strong>v</strong>:  v node</li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Graph.remove_directed_edge" class="classattr">
                                        <input id="Graph.remove_directed_edge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove_directed_edge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.remove_directed_edge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.remove_directed_edge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.remove_directed_edge-174"><a href="#Graph.remove_directed_edge-174"><span class="linenos">174</span></a>    <span class="k">def</span> <span class="nf">remove_directed_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.remove_directed_edge-175"><a href="#Graph.remove_directed_edge-175"><span class="linenos">175</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.remove_directed_edge-176"><a href="#Graph.remove_directed_edge-176"><span class="linenos">176</span></a><span class="sd">        Remove an edge from the graph</span>
</span><span id="Graph.remove_directed_edge-177"><a href="#Graph.remove_directed_edge-177"><span class="linenos">177</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph.remove_directed_edge-178"><a href="#Graph.remove_directed_edge-178"><span class="linenos">178</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph.remove_directed_edge-179"><a href="#Graph.remove_directed_edge-179"><span class="linenos">179</span></a><span class="sd">        :return:</span>
</span><span id="Graph.remove_directed_edge-180"><a href="#Graph.remove_directed_edge-180"><span class="linenos">180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.remove_directed_edge-181"><a href="#Graph.remove_directed_edge-181"><span class="linenos">181</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.remove_directed_edge-182"><a href="#Graph.remove_directed_edge-182"><span class="linenos">182</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.remove_directed_edge-183"><a href="#Graph.remove_directed_edge-183"><span class="linenos">183</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.remove_directed_edge-184"><a href="#Graph.remove_directed_edge-184"><span class="linenos">184</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.remove_directed_edge-185"><a href="#Graph.remove_directed_edge-185"><span class="linenos">185</span></a>
</span><span id="Graph.remove_directed_edge-186"><a href="#Graph.remove_directed_edge-186"><span class="linenos">186</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph.remove_directed_edge-187"><a href="#Graph.remove_directed_edge-187"><span class="linenos">187</span></a>            <span class="k">return</span>  <span class="c1"># no edges from u</span>
</span><span id="Graph.remove_directed_edge-188"><a href="#Graph.remove_directed_edge-188"><span class="linenos">188</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.remove_directed_edge-189"><a href="#Graph.remove_directed_edge-189"><span class="linenos">189</span></a>            <span class="k">return</span>
</span><span id="Graph.remove_directed_edge-190"><a href="#Graph.remove_directed_edge-190"><span class="linenos">190</span></a>
</span><span id="Graph.remove_directed_edge-191"><a href="#Graph.remove_directed_edge-191"><span class="linenos">191</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span><span id="Graph.remove_directed_edge-192"><a href="#Graph.remove_directed_edge-192"><span class="linenos">192</span></a>        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Remove an edge from the graph</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  u node</li>
<li><strong>v</strong>:  v node</li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Graph.update_edge" class="classattr">
                                        <input id="Graph.update_edge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_edge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="n">Dict</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.update_edge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.update_edge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.update_edge-194"><a href="#Graph.update_edge-194"><span class="linenos">194</span></a>    <span class="k">def</span> <span class="nf">update_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="Graph.update_edge-195"><a href="#Graph.update_edge-195"><span class="linenos">195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.update_edge-196"><a href="#Graph.update_edge-196"><span class="linenos">196</span></a><span class="sd">        Update an undirected edge in the graph</span>
</span><span id="Graph.update_edge-197"><a href="#Graph.update_edge-197"><span class="linenos">197</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph.update_edge-198"><a href="#Graph.update_edge-198"><span class="linenos">198</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph.update_edge-199"><a href="#Graph.update_edge-199"><span class="linenos">199</span></a><span class="sd">        :return:</span>
</span><span id="Graph.update_edge-200"><a href="#Graph.update_edge-200"><span class="linenos">200</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.update_edge-201"><a href="#Graph.update_edge-201"><span class="linenos">201</span></a>
</span><span id="Graph.update_edge-202"><a href="#Graph.update_edge-202"><span class="linenos">202</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.update_edge-203"><a href="#Graph.update_edge-203"><span class="linenos">203</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.update_edge-204"><a href="#Graph.update_edge-204"><span class="linenos">204</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.update_edge-205"><a href="#Graph.update_edge-205"><span class="linenos">205</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.update_edge-206"><a href="#Graph.update_edge-206"><span class="linenos">206</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph.update_edge-207"><a href="#Graph.update_edge-207"><span class="linenos">207</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not have any edges&quot;</span><span class="p">)</span>
</span><span id="Graph.update_edge-208"><a href="#Graph.update_edge-208"><span class="linenos">208</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph.update_edge-209"><a href="#Graph.update_edge-209"><span class="linenos">209</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not have any edges&quot;</span><span class="p">)</span>
</span><span id="Graph.update_edge-210"><a href="#Graph.update_edge-210"><span class="linenos">210</span></a>
</span><span id="Graph.update_edge-211"><a href="#Graph.update_edge-211"><span class="linenos">211</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.update_edge-212"><a href="#Graph.update_edge-212"><span class="linenos">212</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no edge from </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph.update_edge-213"><a href="#Graph.update_edge-213"><span class="linenos">213</span></a>
</span><span id="Graph.update_edge-214"><a href="#Graph.update_edge-214"><span class="linenos">214</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.update_edge-215"><a href="#Graph.update_edge-215"><span class="linenos">215</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no edge from </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph.update_edge-216"><a href="#Graph.update_edge-216"><span class="linenos">216</span></a>
</span><span id="Graph.update_edge-217"><a href="#Graph.update_edge-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.update_edge-218"><a href="#Graph.update_edge-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.update_edge-219"><a href="#Graph.update_edge-219"><span class="linenos">219</span></a>
</span><span id="Graph.update_edge-220"><a href="#Graph.update_edge-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.update_edge-221"><a href="#Graph.update_edge-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span></pre></div>


            <div class="docstring"><p>Update an undirected edge in the graph</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  u node</li>
<li><strong>v</strong>:  v node</li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Graph.update_directed_edge" class="classattr">
                                        <input id="Graph.update_directed_edge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_directed_edge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">value</span><span class="p">:</span> <span class="n">Dict</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.update_directed_edge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.update_directed_edge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.update_directed_edge-223"><a href="#Graph.update_directed_edge-223"><span class="linenos">223</span></a>    <span class="k">def</span> <span class="nf">update_directed_edge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
</span><span id="Graph.update_directed_edge-224"><a href="#Graph.update_directed_edge-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.update_directed_edge-225"><a href="#Graph.update_directed_edge-225"><span class="linenos">225</span></a><span class="sd">        Update an edge in the graph</span>
</span><span id="Graph.update_directed_edge-226"><a href="#Graph.update_directed_edge-226"><span class="linenos">226</span></a><span class="sd">        :param u: u node</span>
</span><span id="Graph.update_directed_edge-227"><a href="#Graph.update_directed_edge-227"><span class="linenos">227</span></a><span class="sd">        :param v: v node</span>
</span><span id="Graph.update_directed_edge-228"><a href="#Graph.update_directed_edge-228"><span class="linenos">228</span></a><span class="sd">        :return:</span>
</span><span id="Graph.update_directed_edge-229"><a href="#Graph.update_directed_edge-229"><span class="linenos">229</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.update_directed_edge-230"><a href="#Graph.update_directed_edge-230"><span class="linenos">230</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.update_directed_edge-231"><a href="#Graph.update_directed_edge-231"><span class="linenos">231</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.update_directed_edge-232"><a href="#Graph.update_directed_edge-232"><span class="linenos">232</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.update_directed_edge-233"><a href="#Graph.update_directed_edge-233"><span class="linenos">233</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2"> does not exist&quot;</span><span class="p">)</span>
</span><span id="Graph.update_directed_edge-234"><a href="#Graph.update_directed_edge-234"><span class="linenos">234</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph.update_directed_edge-235"><a href="#Graph.update_directed_edge-235"><span class="linenos">235</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> does not have any edges&quot;</span><span class="p">)</span>
</span><span id="Graph.update_directed_edge-236"><a href="#Graph.update_directed_edge-236"><span class="linenos">236</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.update_directed_edge-237"><a href="#Graph.update_directed_edge-237"><span class="linenos">237</span></a>            <span class="k">raise</span> <span class="n">GraphError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;There is no edge from </span><span class="si">{</span><span class="n">u</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph.update_directed_edge-238"><a href="#Graph.update_directed_edge-238"><span class="linenos">238</span></a>
</span><span id="Graph.update_directed_edge-239"><a href="#Graph.update_directed_edge-239"><span class="linenos">239</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Graph.update_directed_edge-240"><a href="#Graph.update_directed_edge-240"><span class="linenos">240</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span></pre></div>


            <div class="docstring"><p>Update an edge in the graph</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  u node</li>
<li><strong>v</strong>:  v node</li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Graph.edge_exists" class="classattr">
                                        <input id="Graph.edge_exists-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">edge_exists</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.edge_exists-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.edge_exists"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.edge_exists-242"><a href="#Graph.edge_exists-242"><span class="linenos">242</span></a>    <span class="k">def</span> <span class="nf">edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.edge_exists-243"><a href="#Graph.edge_exists-243"><span class="linenos">243</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.edge_exists-244"><a href="#Graph.edge_exists-244"><span class="linenos">244</span></a><span class="sd">        Check if any edge exists between u and v. Cases: u -&gt; v, u &lt;-&gt; v, u &lt;- v</span>
</span><span id="Graph.edge_exists-245"><a href="#Graph.edge_exists-245"><span class="linenos">245</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph.edge_exists-246"><a href="#Graph.edge_exists-246"><span class="linenos">246</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph.edge_exists-247"><a href="#Graph.edge_exists-247"><span class="linenos">247</span></a><span class="sd">        :return: True if any edge exists, False otherwise</span>
</span><span id="Graph.edge_exists-248"><a href="#Graph.edge_exists-248"><span class="linenos">248</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.edge_exists-249"><a href="#Graph.edge_exists-249"><span class="linenos">249</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.edge_exists-250"><a href="#Graph.edge_exists-250"><span class="linenos">250</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph.edge_exists-251"><a href="#Graph.edge_exists-251"><span class="linenos">251</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.edge_exists-252"><a href="#Graph.edge_exists-252"><span class="linenos">252</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph.edge_exists-253"><a href="#Graph.edge_exists-253"><span class="linenos">253</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.edge_exists-254"><a href="#Graph.edge_exists-254"><span class="linenos">254</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph.edge_exists-255"><a href="#Graph.edge_exists-255"><span class="linenos">255</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span> <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.edge_exists-256"><a href="#Graph.edge_exists-256"><span class="linenos">256</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph.edge_exists-257"><a href="#Graph.edge_exists-257"><span class="linenos">257</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Check if any edge exists between u and v. Cases: u -> v, u &lt;-> v, u &lt;- v</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  node u</li>
<li><strong>v</strong>:  node v</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True if any edge exists, False otherwise</p>
</blockquote>
</div>


                            </div>
                            <div id="Graph.directed_edge_exists" class="classattr">
                                        <input id="Graph.directed_edge_exists-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">directed_edge_exists</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.directed_edge_exists-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.directed_edge_exists"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.directed_edge_exists-259"><a href="#Graph.directed_edge_exists-259"><span class="linenos">259</span></a>    <span class="k">def</span> <span class="nf">directed_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.directed_edge_exists-260"><a href="#Graph.directed_edge_exists-260"><span class="linenos">260</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.directed_edge_exists-261"><a href="#Graph.directed_edge_exists-261"><span class="linenos">261</span></a><span class="sd">        Check if a directed edge exists between u and v. Cases: u -&gt; v, u &lt;-&gt; v</span>
</span><span id="Graph.directed_edge_exists-262"><a href="#Graph.directed_edge_exists-262"><span class="linenos">262</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph.directed_edge_exists-263"><a href="#Graph.directed_edge_exists-263"><span class="linenos">263</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph.directed_edge_exists-264"><a href="#Graph.directed_edge_exists-264"><span class="linenos">264</span></a><span class="sd">        :return: True if a directed edge exists, False otherwise</span>
</span><span id="Graph.directed_edge_exists-265"><a href="#Graph.directed_edge_exists-265"><span class="linenos">265</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.directed_edge_exists-266"><a href="#Graph.directed_edge_exists-266"><span class="linenos">266</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.directed_edge_exists-267"><a href="#Graph.directed_edge_exists-267"><span class="linenos">267</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph.directed_edge_exists-268"><a href="#Graph.directed_edge_exists-268"><span class="linenos">268</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.directed_edge_exists-269"><a href="#Graph.directed_edge_exists-269"><span class="linenos">269</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph.directed_edge_exists-270"><a href="#Graph.directed_edge_exists-270"><span class="linenos">270</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph.directed_edge_exists-271"><a href="#Graph.directed_edge_exists-271"><span class="linenos">271</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph.directed_edge_exists-272"><a href="#Graph.directed_edge_exists-272"><span class="linenos">272</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.directed_edge_exists-273"><a href="#Graph.directed_edge_exists-273"><span class="linenos">273</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph.directed_edge_exists-274"><a href="#Graph.directed_edge_exists-274"><span class="linenos">274</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Check if a directed edge exists between u and v. Cases: u -> v, u &lt;-> v</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  node u</li>
<li><strong>v</strong>:  node v</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True if a directed edge exists, False otherwise</p>
</blockquote>
</div>


                            </div>
                            <div id="Graph.only_directed_edge_exists" class="classattr">
                                        <input id="Graph.only_directed_edge_exists-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">only_directed_edge_exists</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.only_directed_edge_exists-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.only_directed_edge_exists"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.only_directed_edge_exists-276"><a href="#Graph.only_directed_edge_exists-276"><span class="linenos">276</span></a>    <span class="k">def</span> <span class="nf">only_directed_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.only_directed_edge_exists-277"><a href="#Graph.only_directed_edge_exists-277"><span class="linenos">277</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.only_directed_edge_exists-278"><a href="#Graph.only_directed_edge_exists-278"><span class="linenos">278</span></a><span class="sd">        Check if a directed edge exists between u and v, but no directed edge exists between v and u. Case: u -&gt; v</span>
</span><span id="Graph.only_directed_edge_exists-279"><a href="#Graph.only_directed_edge_exists-279"><span class="linenos">279</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph.only_directed_edge_exists-280"><a href="#Graph.only_directed_edge_exists-280"><span class="linenos">280</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph.only_directed_edge_exists-281"><a href="#Graph.only_directed_edge_exists-281"><span class="linenos">281</span></a><span class="sd">        :return: True if only directed edge exists, False otherwise</span>
</span><span id="Graph.only_directed_edge_exists-282"><a href="#Graph.only_directed_edge_exists-282"><span class="linenos">282</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.only_directed_edge_exists-283"><a href="#Graph.only_directed_edge_exists-283"><span class="linenos">283</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
</span><span id="Graph.only_directed_edge_exists-284"><a href="#Graph.only_directed_edge_exists-284"><span class="linenos">284</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph.only_directed_edge_exists-285"><a href="#Graph.only_directed_edge_exists-285"><span class="linenos">285</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Check if a directed edge exists between u and v, but no directed edge exists between v and u. Case: u -> v</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  node u</li>
<li><strong>v</strong>:  node v</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True if only directed edge exists, False otherwise</p>
</blockquote>
</div>


                            </div>
                            <div id="Graph.undirected_edge_exists" class="classattr">
                                        <input id="Graph.undirected_edge_exists-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">undirected_edge_exists</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.undirected_edge_exists-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.undirected_edge_exists"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.undirected_edge_exists-287"><a href="#Graph.undirected_edge_exists-287"><span class="linenos">287</span></a>    <span class="k">def</span> <span class="nf">undirected_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.undirected_edge_exists-288"><a href="#Graph.undirected_edge_exists-288"><span class="linenos">288</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.undirected_edge_exists-289"><a href="#Graph.undirected_edge_exists-289"><span class="linenos">289</span></a><span class="sd">        Check if an undirected edge exists between u and v. Note: currently, an undirected edges is implemented just as</span>
</span><span id="Graph.undirected_edge_exists-290"><a href="#Graph.undirected_edge_exists-290"><span class="linenos">290</span></a><span class="sd">        a directed edge. However, they are two functions as they mean different things in different algorithms.</span>
</span><span id="Graph.undirected_edge_exists-291"><a href="#Graph.undirected_edge_exists-291"><span class="linenos">291</span></a><span class="sd">        Currently, this function is used in the PC algorithm, where an undirected edge is an edge which could not be</span>
</span><span id="Graph.undirected_edge_exists-292"><a href="#Graph.undirected_edge_exists-292"><span class="linenos">292</span></a><span class="sd">        oriented in any direction by orientation rules.</span>
</span><span id="Graph.undirected_edge_exists-293"><a href="#Graph.undirected_edge_exists-293"><span class="linenos">293</span></a><span class="sd">        Later, a cohersive naming scheme should be implemented.</span>
</span><span id="Graph.undirected_edge_exists-294"><a href="#Graph.undirected_edge_exists-294"><span class="linenos">294</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph.undirected_edge_exists-295"><a href="#Graph.undirected_edge_exists-295"><span class="linenos">295</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph.undirected_edge_exists-296"><a href="#Graph.undirected_edge_exists-296"><span class="linenos">296</span></a><span class="sd">        :return: True if an undirected edge exists, False otherwise</span>
</span><span id="Graph.undirected_edge_exists-297"><a href="#Graph.undirected_edge_exists-297"><span class="linenos">297</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.undirected_edge_exists-298"><a href="#Graph.undirected_edge_exists-298"><span class="linenos">298</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
</span><span id="Graph.undirected_edge_exists-299"><a href="#Graph.undirected_edge_exists-299"><span class="linenos">299</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph.undirected_edge_exists-300"><a href="#Graph.undirected_edge_exists-300"><span class="linenos">300</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Check if an undirected edge exists between u and v. Note: currently, an undirected edges is implemented just as
a directed edge. However, they are two functions as they mean different things in different algorithms.
Currently, this function is used in the PC algorithm, where an undirected edge is an edge which could not be
oriented in any direction by orientation rules.
Later, a cohersive naming scheme should be implemented.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  node u</li>
<li><strong>v</strong>:  node v</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True if an undirected edge exists, False otherwise</p>
</blockquote>
</div>


                            </div>
                            <div id="Graph.bidirected_edge_exists" class="classattr">
                                        <input id="Graph.bidirected_edge_exists-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">bidirected_edge_exists</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.bidirected_edge_exists-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.bidirected_edge_exists"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.bidirected_edge_exists-302"><a href="#Graph.bidirected_edge_exists-302"><span class="linenos">302</span></a>    <span class="k">def</span> <span class="nf">bidirected_edge_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.bidirected_edge_exists-303"><a href="#Graph.bidirected_edge_exists-303"><span class="linenos">303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.bidirected_edge_exists-304"><a href="#Graph.bidirected_edge_exists-304"><span class="linenos">304</span></a><span class="sd">        Check if a bidirected edge exists between u and v. Note: currently, a bidirected edges is implemented just as</span>
</span><span id="Graph.bidirected_edge_exists-305"><a href="#Graph.bidirected_edge_exists-305"><span class="linenos">305</span></a><span class="sd">        an undirected edge. However, they are two functions as they mean different things in different algorithms.</span>
</span><span id="Graph.bidirected_edge_exists-306"><a href="#Graph.bidirected_edge_exists-306"><span class="linenos">306</span></a><span class="sd">        This function will be used for the FCI algorithm for now, where a bidirected edge is an edge between two nodes</span>
</span><span id="Graph.bidirected_edge_exists-307"><a href="#Graph.bidirected_edge_exists-307"><span class="linenos">307</span></a><span class="sd">        that have been identified to have a common cause by orientation rules.</span>
</span><span id="Graph.bidirected_edge_exists-308"><a href="#Graph.bidirected_edge_exists-308"><span class="linenos">308</span></a><span class="sd">        Later, a cohersive naming scheme should be implemented.</span>
</span><span id="Graph.bidirected_edge_exists-309"><a href="#Graph.bidirected_edge_exists-309"><span class="linenos">309</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph.bidirected_edge_exists-310"><a href="#Graph.bidirected_edge_exists-310"><span class="linenos">310</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph.bidirected_edge_exists-311"><a href="#Graph.bidirected_edge_exists-311"><span class="linenos">311</span></a><span class="sd">        :return: True if a bidirected edge exists, False otherwise</span>
</span><span id="Graph.bidirected_edge_exists-312"><a href="#Graph.bidirected_edge_exists-312"><span class="linenos">312</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.bidirected_edge_exists-313"><a href="#Graph.bidirected_edge_exists-313"><span class="linenos">313</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">u</span><span class="p">):</span>
</span><span id="Graph.bidirected_edge_exists-314"><a href="#Graph.bidirected_edge_exists-314"><span class="linenos">314</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph.bidirected_edge_exists-315"><a href="#Graph.bidirected_edge_exists-315"><span class="linenos">315</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Check if a bidirected edge exists between u and v. Note: currently, a bidirected edges is implemented just as
an undirected edge. However, they are two functions as they mean different things in different algorithms.
This function will be used for the FCI algorithm for now, where a bidirected edge is an edge between two nodes
that have been identified to have a common cause by orientation rules.
Later, a cohersive naming scheme should be implemented.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  node u</li>
<li><strong>v</strong>:  node v</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True if a bidirected edge exists, False otherwise</p>
</blockquote>
</div>


                            </div>
                            <div id="Graph.edge_value" class="classattr">
                                        <input id="Graph.edge_value-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">edge_value</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">) -> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Graph.edge_value-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.edge_value"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.edge_value-317"><a href="#Graph.edge_value-317"><span class="linenos">317</span></a>    <span class="k">def</span> <span class="nf">edge_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
</span><span id="Graph.edge_value-318"><a href="#Graph.edge_value-318"><span class="linenos">318</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.edge_value-319"><a href="#Graph.edge_value-319"><span class="linenos">319</span></a><span class="sd">        retrieve the value of an edge</span>
</span><span id="Graph.edge_value-320"><a href="#Graph.edge_value-320"><span class="linenos">320</span></a><span class="sd">        :param u:</span>
</span><span id="Graph.edge_value-321"><a href="#Graph.edge_value-321"><span class="linenos">321</span></a><span class="sd">        :param v:</span>
</span><span id="Graph.edge_value-322"><a href="#Graph.edge_value-322"><span class="linenos">322</span></a><span class="sd">        :return:</span>
</span><span id="Graph.edge_value-323"><a href="#Graph.edge_value-323"><span class="linenos">323</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.edge_value-324"><a href="#Graph.edge_value-324"><span class="linenos">324</span></a>
</span><span id="Graph.edge_value-325"><a href="#Graph.edge_value-325"><span class="linenos">325</span></a>        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">:</span>
</span><span id="Graph.edge_value-326"><a href="#Graph.edge_value-326"><span class="linenos">326</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="Graph.edge_value-327"><a href="#Graph.edge_value-327"><span class="linenos">327</span></a>        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.edge_value-328"><a href="#Graph.edge_value-328"><span class="linenos">328</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="Graph.edge_value-329"><a href="#Graph.edge_value-329"><span class="linenos">329</span></a>
</span><span id="Graph.edge_value-330"><a href="#Graph.edge_value-330"><span class="linenos">330</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">][</span><span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>retrieve the value of an edge</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>: </li>
<li><strong>v</strong>: </li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Graph.add_node" class="classattr">
                                        <input id="Graph.add_node-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_node</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">values</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">]</span>,</span><span class="param">	<span class="n">id_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="nb">any</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="n"><a href="#Node">Node</a></span>:</span></span>

                <label class="view-source-button" for="Graph.add_node-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.add_node"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.add_node-332"><a href="#Graph.add_node-332"><span class="linenos">332</span></a>    <span class="k">def</span> <span class="nf">add_node</span><span class="p">(</span>
</span><span id="Graph.add_node-333"><a href="#Graph.add_node-333"><span class="linenos">333</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Graph.add_node-334"><a href="#Graph.add_node-334"><span class="linenos">334</span></a>        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Graph.add_node-335"><a href="#Graph.add_node-335"><span class="linenos">335</span></a>        <span class="n">values</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">],</span>
</span><span id="Graph.add_node-336"><a href="#Graph.add_node-336"><span class="linenos">336</span></a>        <span class="n">id_</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Graph.add_node-337"><a href="#Graph.add_node-337"><span class="linenos">337</span></a>        <span class="n">metadata</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Graph.add_node-338"><a href="#Graph.add_node-338"><span class="linenos">338</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">:</span>
</span><span id="Graph.add_node-339"><a href="#Graph.add_node-339"><span class="linenos">339</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.add_node-340"><a href="#Graph.add_node-340"><span class="linenos">340</span></a><span class="sd">        Add a node to the graph</span>
</span><span id="Graph.add_node-341"><a href="#Graph.add_node-341"><span class="linenos">341</span></a><span class="sd">        :param name: name of the node</span>
</span><span id="Graph.add_node-342"><a href="#Graph.add_node-342"><span class="linenos">342</span></a><span class="sd">        :param values: values of the node</span>
</span><span id="Graph.add_node-343"><a href="#Graph.add_node-343"><span class="linenos">343</span></a><span class="sd">        :param id_: id_ of the node</span>
</span><span id="Graph.add_node-344"><a href="#Graph.add_node-344"><span class="linenos">344</span></a><span class="sd">        :param : node</span>
</span><span id="Graph.add_node-345"><a href="#Graph.add_node-345"><span class="linenos">345</span></a>
</span><span id="Graph.add_node-346"><a href="#Graph.add_node-346"><span class="linenos">346</span></a><span class="sd">        :return: created Node</span>
</span><span id="Graph.add_node-347"><a href="#Graph.add_node-347"><span class="linenos">347</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.add_node-348"><a href="#Graph.add_node-348"><span class="linenos">348</span></a>        <span class="k">if</span> <span class="n">id_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph.add_node-349"><a href="#Graph.add_node-349"><span class="linenos">349</span></a>            <span class="n">id_</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid4</span><span class="p">())</span>
</span><span id="Graph.add_node-350"><a href="#Graph.add_node-350"><span class="linenos">350</span></a>
</span><span id="Graph.add_node-351"><a href="#Graph.add_node-351"><span class="linenos">351</span></a>        <span class="k">if</span> <span class="n">id_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">:</span>
</span><span id="Graph.add_node-352"><a href="#Graph.add_node-352"><span class="linenos">352</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node with id </span><span class="si">{</span><span class="n">id_</span><span class="si">}</span><span class="s2"> already exists&quot;</span><span class="p">)</span>
</span><span id="Graph.add_node-353"><a href="#Graph.add_node-353"><span class="linenos">353</span></a>
</span><span id="Graph.add_node-354"><a href="#Graph.add_node-354"><span class="linenos">354</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">torch</span><span class="o">.</span><span class="n">Tensor</span><span class="p">):</span>
</span><span id="Graph.add_node-355"><a href="#Graph.add_node-355"><span class="linenos">355</span></a>            <span class="n">tensor_values</span> <span class="o">=</span> <span class="n">values</span>
</span><span id="Graph.add_node-356"><a href="#Graph.add_node-356"><span class="linenos">356</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Graph.add_node-357"><a href="#Graph.add_node-357"><span class="linenos">357</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Graph.add_node-358"><a href="#Graph.add_node-358"><span class="linenos">358</span></a>                <span class="n">tensor_values</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</span><span id="Graph.add_node-359"><a href="#Graph.add_node-359"><span class="linenos">359</span></a>            <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="Graph.add_node-360"><a href="#Graph.add_node-360"><span class="linenos">360</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Currently only numeric values are supported. </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Graph.add_node-361"><a href="#Graph.add_node-361"><span class="linenos">361</span></a>
</span><span id="Graph.add_node-362"><a href="#Graph.add_node-362"><span class="linenos">362</span></a>        <span class="k">if</span> <span class="n">metadata</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Graph.add_node-363"><a href="#Graph.add_node-363"><span class="linenos">363</span></a>            <span class="n">metadata</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Graph.add_node-364"><a href="#Graph.add_node-364"><span class="linenos">364</span></a>
</span><span id="Graph.add_node-365"><a href="#Graph.add_node-365"><span class="linenos">365</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">id_</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">tensor_values</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="n">metadata</span><span class="p">)</span>
</span><span id="Graph.add_node-366"><a href="#Graph.add_node-366"><span class="linenos">366</span></a>
</span><span id="Graph.add_node-367"><a href="#Graph.add_node-367"><span class="linenos">367</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
</span><span id="Graph.add_node-368"><a href="#Graph.add_node-368"><span class="linenos">368</span></a>        <span class="k">return</span> <span class="n">node</span>
</span></pre></div>


            <div class="docstring"><p>Add a node to the graph</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong>:  name of the node</li>
<li><strong>values</strong>:  values of the node</li>
<li><strong>id_</strong>:  id_ of the node
:param : node</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>created Node</p>
</blockquote>
</div>


                            </div>
                            <div id="Graph.directed_path_exists" class="classattr">
                                        <input id="Graph.directed_path_exists-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">directed_path_exists</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.directed_path_exists-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.directed_path_exists"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.directed_path_exists-370"><a href="#Graph.directed_path_exists-370"><span class="linenos">370</span></a>    <span class="k">def</span> <span class="nf">directed_path_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.directed_path_exists-371"><a href="#Graph.directed_path_exists-371"><span class="linenos">371</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.directed_path_exists-372"><a href="#Graph.directed_path_exists-372"><span class="linenos">372</span></a><span class="sd">        Check if a directed path from u to v exists</span>
</span><span id="Graph.directed_path_exists-373"><a href="#Graph.directed_path_exists-373"><span class="linenos">373</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph.directed_path_exists-374"><a href="#Graph.directed_path_exists-374"><span class="linenos">374</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph.directed_path_exists-375"><a href="#Graph.directed_path_exists-375"><span class="linenos">375</span></a><span class="sd">        :return: True if a directed path exists, False otherwise</span>
</span><span id="Graph.directed_path_exists-376"><a href="#Graph.directed_path_exists-376"><span class="linenos">376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.directed_path_exists-377"><a href="#Graph.directed_path_exists-377"><span class="linenos">377</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph.directed_path_exists-378"><a href="#Graph.directed_path_exists-378"><span class="linenos">378</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph.directed_path_exists-379"><a href="#Graph.directed_path_exists-379"><span class="linenos">379</span></a>        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.directed_path_exists-380"><a href="#Graph.directed_path_exists-380"><span class="linenos">380</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_path_exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">],</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph.directed_path_exists-381"><a href="#Graph.directed_path_exists-381"><span class="linenos">381</span></a>                <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph.directed_path_exists-382"><a href="#Graph.directed_path_exists-382"><span class="linenos">382</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Check if a directed path from u to v exists</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  node u</li>
<li><strong>v</strong>:  node v</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True if a directed path exists, False otherwise</p>
</blockquote>
</div>


                            </div>
                            <div id="Graph.directed_paths" class="classattr">
                                        <input id="Graph.directed_paths-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">directed_paths</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.directed_paths-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.directed_paths"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.directed_paths-384"><a href="#Graph.directed_paths-384"><span class="linenos">384</span></a>    <span class="k">def</span> <span class="nf">directed_paths</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.directed_paths-385"><a href="#Graph.directed_paths-385"><span class="linenos">385</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.directed_paths-386"><a href="#Graph.directed_paths-386"><span class="linenos">386</span></a><span class="sd">        Return all directed paths from u to v</span>
</span><span id="Graph.directed_paths-387"><a href="#Graph.directed_paths-387"><span class="linenos">387</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph.directed_paths-388"><a href="#Graph.directed_paths-388"><span class="linenos">388</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph.directed_paths-389"><a href="#Graph.directed_paths-389"><span class="linenos">389</span></a><span class="sd">        :return: list of directed paths</span>
</span><span id="Graph.directed_paths-390"><a href="#Graph.directed_paths-390"><span class="linenos">390</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.directed_paths-391"><a href="#Graph.directed_paths-391"><span class="linenos">391</span></a>        <span class="c1"># TODO: try a better data structure for this</span>
</span><span id="Graph.directed_paths-392"><a href="#Graph.directed_paths-392"><span class="linenos">392</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph.directed_paths-393"><a href="#Graph.directed_paths-393"><span class="linenos">393</span></a>            <span class="k">return</span> <span class="p">[[(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">)]]</span>
</span><span id="Graph.directed_paths-394"><a href="#Graph.directed_paths-394"><span class="linenos">394</span></a>        <span class="n">paths</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Graph.directed_paths-395"><a href="#Graph.directed_paths-395"><span class="linenos">395</span></a>        <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]:</span>
</span><span id="Graph.directed_paths-396"><a href="#Graph.directed_paths-396"><span class="linenos">396</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">]):</span>
</span><span id="Graph.directed_paths-397"><a href="#Graph.directed_paths-397"><span class="linenos">397</span></a>                <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_paths</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">],</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph.directed_paths-398"><a href="#Graph.directed_paths-398"><span class="linenos">398</span></a>                    <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">([(</span><span class="n">u</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">w</span><span class="p">])]</span> <span class="o">+</span> <span class="n">path</span><span class="p">)</span>
</span><span id="Graph.directed_paths-399"><a href="#Graph.directed_paths-399"><span class="linenos">399</span></a>        <span class="k">return</span> <span class="n">paths</span>
</span></pre></div>


            <div class="docstring"><p>Return all directed paths from u to v</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  node u</li>
<li><strong>v</strong>:  node v</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of directed paths</p>
</blockquote>
</div>


                            </div>
                            <div id="Graph.parents_of_node" class="classattr">
                                        <input id="Graph.parents_of_node-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parents_of_node</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.parents_of_node-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.parents_of_node"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.parents_of_node-401"><a href="#Graph.parents_of_node-401"><span class="linenos">401</span></a>    <span class="k">def</span> <span class="nf">parents_of_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.parents_of_node-402"><a href="#Graph.parents_of_node-402"><span class="linenos">402</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.parents_of_node-403"><a href="#Graph.parents_of_node-403"><span class="linenos">403</span></a><span class="sd">        Return all parents of a node u</span>
</span><span id="Graph.parents_of_node-404"><a href="#Graph.parents_of_node-404"><span class="linenos">404</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph.parents_of_node-405"><a href="#Graph.parents_of_node-405"><span class="linenos">405</span></a><span class="sd">        :return: list of nodes (parents)</span>
</span><span id="Graph.parents_of_node-406"><a href="#Graph.parents_of_node-406"><span class="linenos">406</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.parents_of_node-407"><a href="#Graph.parents_of_node-407"><span class="linenos">407</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reverse_edges</span><span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
</span></pre></div>


            <div class="docstring"><p>Return all parents of a node u</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  node u</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>list of nodes (parents)</p>
</blockquote>
</div>


                            </div>
                            <div id="Graph.inducing_path_exists" class="classattr">
                                        <input id="Graph.inducing_path_exists-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">inducing_path_exists</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">u</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span>, </span><span class="param"><span class="n">v</span><span class="p">:</span> <span class="n"><a href="#Node">Node</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Graph.inducing_path_exists-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Graph.inducing_path_exists"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Graph.inducing_path_exists-409"><a href="#Graph.inducing_path_exists-409"><span class="linenos">409</span></a>    <span class="k">def</span> <span class="nf">inducing_path_exists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="n">Node</span><span class="p">):</span>
</span><span id="Graph.inducing_path_exists-410"><a href="#Graph.inducing_path_exists-410"><span class="linenos">410</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Graph.inducing_path_exists-411"><a href="#Graph.inducing_path_exists-411"><span class="linenos">411</span></a><span class="sd">        Check if an inducing path from u to v exists.</span>
</span><span id="Graph.inducing_path_exists-412"><a href="#Graph.inducing_path_exists-412"><span class="linenos">412</span></a><span class="sd">        An inducing path from u to v is a directed path from u to v on which all mediators are colliders.</span>
</span><span id="Graph.inducing_path_exists-413"><a href="#Graph.inducing_path_exists-413"><span class="linenos">413</span></a><span class="sd">        :param u: node u</span>
</span><span id="Graph.inducing_path_exists-414"><a href="#Graph.inducing_path_exists-414"><span class="linenos">414</span></a><span class="sd">        :param v: node v</span>
</span><span id="Graph.inducing_path_exists-415"><a href="#Graph.inducing_path_exists-415"><span class="linenos">415</span></a><span class="sd">        :return: True if an inducing path exists, False otherwise</span>
</span><span id="Graph.inducing_path_exists-416"><a href="#Graph.inducing_path_exists-416"><span class="linenos">416</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Graph.inducing_path_exists-417"><a href="#Graph.inducing_path_exists-417"><span class="linenos">417</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_path_exists</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph.inducing_path_exists-418"><a href="#Graph.inducing_path_exists-418"><span class="linenos">418</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="Graph.inducing_path_exists-419"><a href="#Graph.inducing_path_exists-419"><span class="linenos">419</span></a>        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directed_paths</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
</span><span id="Graph.inducing_path_exists-420"><a href="#Graph.inducing_path_exists-420"><span class="linenos">420</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Graph.inducing_path_exists-421"><a href="#Graph.inducing_path_exists-421"><span class="linenos">421</span></a>                <span class="n">r</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
</span><span id="Graph.inducing_path_exists-422"><a href="#Graph.inducing_path_exists-422"><span class="linenos">422</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">bidirected_edge_exists</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">):</span>
</span><span id="Graph.inducing_path_exists-423"><a href="#Graph.inducing_path_exists-423"><span class="linenos">423</span></a>                    <span class="c1"># TODO: check if this is correct (@sof)</span>
</span><span id="Graph.inducing_path_exists-424"><a href="#Graph.inducing_path_exists-424"><span class="linenos">424</span></a>                    <span class="k">return</span> <span class="kc">True</span>
</span><span id="Graph.inducing_path_exists-425"><a href="#Graph.inducing_path_exists-425"><span class="linenos">425</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Check if an inducing path from u to v exists.
An inducing path from u to v is a directed path from u to v on which all mediators are colliders.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>u</strong>:  node u</li>
<li><strong>v</strong>:  node v</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>True if an inducing path exists, False otherwise</p>
</blockquote>
</div>


                            </div>
                </section>
                <section id="unpack_run">
                            <input id="unpack_run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">unpack_run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">args</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="unpack_run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#unpack_run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="unpack_run-428"><a href="#unpack_run-428"><span class="linenos">428</span></a><span class="k">def</span> <span class="nf">unpack_run</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
</span><span id="unpack_run-429"><a href="#unpack_run-429"><span class="linenos">429</span></a>    <span class="n">tst</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="unpack_run-430"><a href="#unpack_run-430"><span class="linenos">430</span></a>    <span class="k">del</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="unpack_run-431"><a href="#unpack_run-431"><span class="linenos">431</span></a>    <span class="k">return</span> <span class="n">tst</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span></pre></div>


    

                </section>
                <section id="AbstractGraphModel">
                            <input id="AbstractGraphModel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AbstractGraphModel</span><wbr>(<span class="base"><a href="interfaces.html#GraphModelInterface">causy.interfaces.GraphModelInterface</a></span>, <span class="base">abc.ABC</span>):

                <label class="view-source-button" for="AbstractGraphModel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AbstractGraphModel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AbstractGraphModel-434"><a href="#AbstractGraphModel-434"><span class="linenos">434</span></a><span class="k">class</span> <span class="nc">AbstractGraphModel</span><span class="p">(</span><span class="n">GraphModelInterface</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
</span><span id="AbstractGraphModel-435"><a href="#AbstractGraphModel-435"><span class="linenos">435</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-436"><a href="#AbstractGraphModel-436"><span class="linenos">436</span></a><span class="sd">    The graph model is the main class of causy. It is responsible for creating a graph from data and executing the pipeline_steps.</span>
</span><span id="AbstractGraphModel-437"><a href="#AbstractGraphModel-437"><span class="linenos">437</span></a>
</span><span id="AbstractGraphModel-438"><a href="#AbstractGraphModel-438"><span class="linenos">438</span></a><span class="sd">    The graph model is responsible for the following tasks:</span>
</span><span id="AbstractGraphModel-439"><a href="#AbstractGraphModel-439"><span class="linenos">439</span></a><span class="sd">    - Create a graph from data (create_graph_from_data)</span>
</span><span id="AbstractGraphModel-440"><a href="#AbstractGraphModel-440"><span class="linenos">440</span></a><span class="sd">    - Execute the pipeline_steps (execute_pipeline_steps)</span>
</span><span id="AbstractGraphModel-441"><a href="#AbstractGraphModel-441"><span class="linenos">441</span></a><span class="sd">    - Take actions on the graph (execute_pipeline_step &amp; _take_action which is called by execute_pipeline_step)</span>
</span><span id="AbstractGraphModel-442"><a href="#AbstractGraphModel-442"><span class="linenos">442</span></a>
</span><span id="AbstractGraphModel-443"><a href="#AbstractGraphModel-443"><span class="linenos">443</span></a><span class="sd">    It also initializes and takes care of the multiprocessing pool.</span>
</span><span id="AbstractGraphModel-444"><a href="#AbstractGraphModel-444"><span class="linenos">444</span></a>
</span><span id="AbstractGraphModel-445"><a href="#AbstractGraphModel-445"><span class="linenos">445</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-446"><a href="#AbstractGraphModel-446"><span class="linenos">446</span></a>
</span><span id="AbstractGraphModel-447"><a href="#AbstractGraphModel-447"><span class="linenos">447</span></a>    <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]</span>
</span><span id="AbstractGraphModel-448"><a href="#AbstractGraphModel-448"><span class="linenos">448</span></a>    <span class="n">graph</span><span class="p">:</span> <span class="n">BaseGraphInterface</span>
</span><span id="AbstractGraphModel-449"><a href="#AbstractGraphModel-449"><span class="linenos">449</span></a>    <span class="n">pool</span><span class="p">:</span> <span class="n">mp</span><span class="o">.</span><span class="n">Pool</span>
</span><span id="AbstractGraphModel-450"><a href="#AbstractGraphModel-450"><span class="linenos">450</span></a>
</span><span id="AbstractGraphModel-451"><a href="#AbstractGraphModel-451"><span class="linenos">451</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="AbstractGraphModel-452"><a href="#AbstractGraphModel-452"><span class="linenos">452</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AbstractGraphModel-453"><a href="#AbstractGraphModel-453"><span class="linenos">453</span></a>        <span class="n">graph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="AbstractGraphModel-454"><a href="#AbstractGraphModel-454"><span class="linenos">454</span></a>        <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AbstractGraphModel-455"><a href="#AbstractGraphModel-455"><span class="linenos">455</span></a>    <span class="p">):</span>
</span><span id="AbstractGraphModel-456"><a href="#AbstractGraphModel-456"><span class="linenos">456</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
</span><span id="AbstractGraphModel-457"><a href="#AbstractGraphModel-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span> <span class="o">=</span> <span class="n">pipeline_steps</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="AbstractGraphModel-458"><a href="#AbstractGraphModel-458"><span class="linenos">458</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AbstractGraphModel-459"><a href="#AbstractGraphModel-459"><span class="linenos">459</span></a>
</span><span id="AbstractGraphModel-460"><a href="#AbstractGraphModel-460"><span class="linenos">460</span></a>    <span class="k">def</span> <span class="nf">create_graph_from_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]):</span>
</span><span id="AbstractGraphModel-461"><a href="#AbstractGraphModel-461"><span class="linenos">461</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-462"><a href="#AbstractGraphModel-462"><span class="linenos">462</span></a><span class="sd">        Create a graph from data</span>
</span><span id="AbstractGraphModel-463"><a href="#AbstractGraphModel-463"><span class="linenos">463</span></a><span class="sd">        :param data: is a list of dictionaries</span>
</span><span id="AbstractGraphModel-464"><a href="#AbstractGraphModel-464"><span class="linenos">464</span></a><span class="sd">        :return:</span>
</span><span id="AbstractGraphModel-465"><a href="#AbstractGraphModel-465"><span class="linenos">465</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-466"><a href="#AbstractGraphModel-466"><span class="linenos">466</span></a>        <span class="c1"># initialize nodes</span>
</span><span id="AbstractGraphModel-467"><a href="#AbstractGraphModel-467"><span class="linenos">467</span></a>        <span class="n">keys</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="AbstractGraphModel-468"><a href="#AbstractGraphModel-468"><span class="linenos">468</span></a>        <span class="n">nodes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AbstractGraphModel-469"><a href="#AbstractGraphModel-469"><span class="linenos">469</span></a>
</span><span id="AbstractGraphModel-470"><a href="#AbstractGraphModel-470"><span class="linenos">470</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="AbstractGraphModel-471"><a href="#AbstractGraphModel-471"><span class="linenos">471</span></a>            <span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AbstractGraphModel-472"><a href="#AbstractGraphModel-472"><span class="linenos">472</span></a>
</span><span id="AbstractGraphModel-473"><a href="#AbstractGraphModel-473"><span class="linenos">473</span></a>        <span class="c1"># load nodes into node dict</span>
</span><span id="AbstractGraphModel-474"><a href="#AbstractGraphModel-474"><span class="linenos">474</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="AbstractGraphModel-475"><a href="#AbstractGraphModel-475"><span class="linenos">475</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="AbstractGraphModel-476"><a href="#AbstractGraphModel-476"><span class="linenos">476</span></a>                <span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="AbstractGraphModel-477"><a href="#AbstractGraphModel-477"><span class="linenos">477</span></a>
</span><span id="AbstractGraphModel-478"><a href="#AbstractGraphModel-478"><span class="linenos">478</span></a>        <span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
</span><span id="AbstractGraphModel-479"><a href="#AbstractGraphModel-479"><span class="linenos">479</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="AbstractGraphModel-480"><a href="#AbstractGraphModel-480"><span class="linenos">480</span></a>            <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="AbstractGraphModel-481"><a href="#AbstractGraphModel-481"><span class="linenos">481</span></a>
</span><span id="AbstractGraphModel-482"><a href="#AbstractGraphModel-482"><span class="linenos">482</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
</span><span id="AbstractGraphModel-483"><a href="#AbstractGraphModel-483"><span class="linenos">483</span></a>        <span class="k">return</span> <span class="n">graph</span>
</span><span id="AbstractGraphModel-484"><a href="#AbstractGraphModel-484"><span class="linenos">484</span></a>
</span><span id="AbstractGraphModel-485"><a href="#AbstractGraphModel-485"><span class="linenos">485</span></a>    <span class="k">def</span> <span class="nf">create_all_possible_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AbstractGraphModel-486"><a href="#AbstractGraphModel-486"><span class="linenos">486</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-487"><a href="#AbstractGraphModel-487"><span class="linenos">487</span></a><span class="sd">        Create all possible edges on a graph</span>
</span><span id="AbstractGraphModel-488"><a href="#AbstractGraphModel-488"><span class="linenos">488</span></a><span class="sd">        TODO: replace me with the skeleton builders</span>
</span><span id="AbstractGraphModel-489"><a href="#AbstractGraphModel-489"><span class="linenos">489</span></a><span class="sd">        :return:</span>
</span><span id="AbstractGraphModel-490"><a href="#AbstractGraphModel-490"><span class="linenos">490</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-491"><a href="#AbstractGraphModel-491"><span class="linenos">491</span></a>        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="AbstractGraphModel-492"><a href="#AbstractGraphModel-492"><span class="linenos">492</span></a>            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="AbstractGraphModel-493"><a href="#AbstractGraphModel-493"><span class="linenos">493</span></a>                <span class="k">if</span> <span class="n">u</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
</span><span id="AbstractGraphModel-494"><a href="#AbstractGraphModel-494"><span class="linenos">494</span></a>                    <span class="k">continue</span>
</span><span id="AbstractGraphModel-495"><a href="#AbstractGraphModel-495"><span class="linenos">495</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="p">{})</span>
</span><span id="AbstractGraphModel-496"><a href="#AbstractGraphModel-496"><span class="linenos">496</span></a>
</span><span id="AbstractGraphModel-497"><a href="#AbstractGraphModel-497"><span class="linenos">497</span></a>    <span class="k">def</span> <span class="nf">execute_pipeline_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AbstractGraphModel-498"><a href="#AbstractGraphModel-498"><span class="linenos">498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-499"><a href="#AbstractGraphModel-499"><span class="linenos">499</span></a><span class="sd">        Execute all pipeline_steps</span>
</span><span id="AbstractGraphModel-500"><a href="#AbstractGraphModel-500"><span class="linenos">500</span></a><span class="sd">        :return: the steps taken during the step execution</span>
</span><span id="AbstractGraphModel-501"><a href="#AbstractGraphModel-501"><span class="linenos">501</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-502"><a href="#AbstractGraphModel-502"><span class="linenos">502</span></a>        <span class="n">action_history</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AbstractGraphModel-503"><a href="#AbstractGraphModel-503"><span class="linenos">503</span></a>
</span><span id="AbstractGraphModel-504"><a href="#AbstractGraphModel-504"><span class="linenos">504</span></a>        <span class="k">for</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span><span class="p">:</span>
</span><span id="AbstractGraphModel-505"><a href="#AbstractGraphModel-505"><span class="linenos">505</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing pipeline step </span><span class="si">{</span><span class="nb">filter</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="AbstractGraphModel-506"><a href="#AbstractGraphModel-506"><span class="linenos">506</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">filter</span><span class="p">,</span> <span class="n">LogicStepInterface</span><span class="p">):</span>
</span><span id="AbstractGraphModel-507"><a href="#AbstractGraphModel-507"><span class="linenos">507</span></a>                <span class="nb">filter</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AbstractGraphModel-508"><a href="#AbstractGraphModel-508"><span class="linenos">508</span></a>                <span class="k">continue</span>
</span><span id="AbstractGraphModel-509"><a href="#AbstractGraphModel-509"><span class="linenos">509</span></a>
</span><span id="AbstractGraphModel-510"><a href="#AbstractGraphModel-510"><span class="linenos">510</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_pipeline_step</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span>
</span><span id="AbstractGraphModel-511"><a href="#AbstractGraphModel-511"><span class="linenos">511</span></a>            <span class="n">action_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="AbstractGraphModel-512"><a href="#AbstractGraphModel-512"><span class="linenos">512</span></a>                <span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="nb">filter</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">}</span>
</span><span id="AbstractGraphModel-513"><a href="#AbstractGraphModel-513"><span class="linenos">513</span></a>            <span class="p">)</span>
</span><span id="AbstractGraphModel-514"><a href="#AbstractGraphModel-514"><span class="linenos">514</span></a>
</span><span id="AbstractGraphModel-515"><a href="#AbstractGraphModel-515"><span class="linenos">515</span></a>        <span class="k">return</span> <span class="n">action_history</span>
</span><span id="AbstractGraphModel-516"><a href="#AbstractGraphModel-516"><span class="linenos">516</span></a>
</span><span id="AbstractGraphModel-517"><a href="#AbstractGraphModel-517"><span class="linenos">517</span></a>    <span class="k">def</span> <span class="nf">_format_yield</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_fn</span><span class="p">,</span> <span class="n">graph</span><span class="p">,</span> <span class="n">generator</span><span class="p">):</span>
</span><span id="AbstractGraphModel-518"><a href="#AbstractGraphModel-518"><span class="linenos">518</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-519"><a href="#AbstractGraphModel-519"><span class="linenos">519</span></a><span class="sd">        Format the yield for the parallel processing</span>
</span><span id="AbstractGraphModel-520"><a href="#AbstractGraphModel-520"><span class="linenos">520</span></a><span class="sd">        :param test_fn: the pipeline_step test function</span>
</span><span id="AbstractGraphModel-521"><a href="#AbstractGraphModel-521"><span class="linenos">521</span></a><span class="sd">        :param graph: the graph</span>
</span><span id="AbstractGraphModel-522"><a href="#AbstractGraphModel-522"><span class="linenos">522</span></a><span class="sd">        :param generator: the generator object which generates the combinations</span>
</span><span id="AbstractGraphModel-523"><a href="#AbstractGraphModel-523"><span class="linenos">523</span></a><span class="sd">        :return: yields the test function with its inputs</span>
</span><span id="AbstractGraphModel-524"><a href="#AbstractGraphModel-524"><span class="linenos">524</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-525"><a href="#AbstractGraphModel-525"><span class="linenos">525</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">generator</span><span class="p">:</span>
</span><span id="AbstractGraphModel-526"><a href="#AbstractGraphModel-526"><span class="linenos">526</span></a>            <span class="k">yield</span> <span class="p">[</span><span class="n">test_fn</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">i</span><span class="p">],</span> <span class="n">graph</span><span class="p">]</span>
</span><span id="AbstractGraphModel-527"><a href="#AbstractGraphModel-527"><span class="linenos">527</span></a>
</span><span id="AbstractGraphModel-528"><a href="#AbstractGraphModel-528"><span class="linenos">528</span></a>    <span class="k">def</span> <span class="nf">_take_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">):</span>
</span><span id="AbstractGraphModel-529"><a href="#AbstractGraphModel-529"><span class="linenos">529</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-530"><a href="#AbstractGraphModel-530"><span class="linenos">530</span></a><span class="sd">        Take the actions returned by the test</span>
</span><span id="AbstractGraphModel-531"><a href="#AbstractGraphModel-531"><span class="linenos">531</span></a>
</span><span id="AbstractGraphModel-532"><a href="#AbstractGraphModel-532"><span class="linenos">532</span></a><span class="sd">        In causy changes on the graph are not executed directly. Instead, the test returns an action which should be executed on the graph.</span>
</span><span id="AbstractGraphModel-533"><a href="#AbstractGraphModel-533"><span class="linenos">533</span></a><span class="sd">        This is done to make it possible to execute the tests in parallel as well as to decide proactively at which point in the decisions taken by the pipeline step should be executed.</span>
</span><span id="AbstractGraphModel-534"><a href="#AbstractGraphModel-534"><span class="linenos">534</span></a><span class="sd">        Actions are returned by the test and are executed on the graph. The actions are stored in the action history to make it possible to revert the actions or use them in a later step.</span>
</span><span id="AbstractGraphModel-535"><a href="#AbstractGraphModel-535"><span class="linenos">535</span></a>
</span><span id="AbstractGraphModel-536"><a href="#AbstractGraphModel-536"><span class="linenos">536</span></a><span class="sd">        :param results:</span>
</span><span id="AbstractGraphModel-537"><a href="#AbstractGraphModel-537"><span class="linenos">537</span></a><span class="sd">        :return:</span>
</span><span id="AbstractGraphModel-538"><a href="#AbstractGraphModel-538"><span class="linenos">538</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-539"><a href="#AbstractGraphModel-539"><span class="linenos">539</span></a>        <span class="n">actions_taken</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AbstractGraphModel-540"><a href="#AbstractGraphModel-540"><span class="linenos">540</span></a>        <span class="k">for</span> <span class="n">result_items</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
</span><span id="AbstractGraphModel-541"><a href="#AbstractGraphModel-541"><span class="linenos">541</span></a>            <span class="k">if</span> <span class="n">result_items</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AbstractGraphModel-542"><a href="#AbstractGraphModel-542"><span class="linenos">542</span></a>                <span class="k">continue</span>
</span><span id="AbstractGraphModel-543"><a href="#AbstractGraphModel-543"><span class="linenos">543</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result_items</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="AbstractGraphModel-544"><a href="#AbstractGraphModel-544"><span class="linenos">544</span></a>                <span class="n">result_items</span> <span class="o">=</span> <span class="p">[</span><span class="n">result_items</span><span class="p">]</span>
</span><span id="AbstractGraphModel-545"><a href="#AbstractGraphModel-545"><span class="linenos">545</span></a>
</span><span id="AbstractGraphModel-546"><a href="#AbstractGraphModel-546"><span class="linenos">546</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result_items</span><span class="p">:</span>
</span><span id="AbstractGraphModel-547"><a href="#AbstractGraphModel-547"><span class="linenos">547</span></a>                <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="AbstractGraphModel-548"><a href="#AbstractGraphModel-548"><span class="linenos">548</span></a>                    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Action: </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">action</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> and </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="AbstractGraphModel-549"><a href="#AbstractGraphModel-549"><span class="linenos">549</span></a>
</span><span id="AbstractGraphModel-550"><a href="#AbstractGraphModel-550"><span class="linenos">550</span></a>                <span class="c1"># execute the action returned by the test</span>
</span><span id="AbstractGraphModel-551"><a href="#AbstractGraphModel-551"><span class="linenos">551</span></a>                <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">REMOVE_EDGE_UNDIRECTED</span><span class="p">:</span>
</span><span id="AbstractGraphModel-552"><a href="#AbstractGraphModel-552"><span class="linenos">552</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">undirected_edge_exists</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">):</span>
</span><span id="AbstractGraphModel-553"><a href="#AbstractGraphModel-553"><span class="linenos">553</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="AbstractGraphModel-554"><a href="#AbstractGraphModel-554"><span class="linenos">554</span></a>                            <span class="sa">f</span><span class="s2">&quot;Tried to remove undirected edge </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> &lt;-&gt; </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. But it does not exist.&quot;</span>
</span><span id="AbstractGraphModel-555"><a href="#AbstractGraphModel-555"><span class="linenos">555</span></a>                        <span class="p">)</span>
</span><span id="AbstractGraphModel-556"><a href="#AbstractGraphModel-556"><span class="linenos">556</span></a>                        <span class="k">continue</span>
</span><span id="AbstractGraphModel-557"><a href="#AbstractGraphModel-557"><span class="linenos">557</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">remove_edge</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</span><span id="AbstractGraphModel-558"><a href="#AbstractGraphModel-558"><span class="linenos">558</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel-559"><a href="#AbstractGraphModel-559"><span class="linenos">559</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel-560"><a href="#AbstractGraphModel-560"><span class="linenos">560</span></a>                <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">UPDATE_EDGE</span><span class="p">:</span>
</span><span id="AbstractGraphModel-561"><a href="#AbstractGraphModel-561"><span class="linenos">561</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">edge_exists</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">):</span>
</span><span id="AbstractGraphModel-562"><a href="#AbstractGraphModel-562"><span class="linenos">562</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="AbstractGraphModel-563"><a href="#AbstractGraphModel-563"><span class="linenos">563</span></a>                            <span class="sa">f</span><span class="s2">&quot;Tried to update edge </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. But it does not exist.&quot;</span>
</span><span id="AbstractGraphModel-564"><a href="#AbstractGraphModel-564"><span class="linenos">564</span></a>                        <span class="p">)</span>
</span><span id="AbstractGraphModel-565"><a href="#AbstractGraphModel-565"><span class="linenos">565</span></a>                        <span class="k">continue</span>
</span><span id="AbstractGraphModel-566"><a href="#AbstractGraphModel-566"><span class="linenos">566</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">update_edge</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="AbstractGraphModel-567"><a href="#AbstractGraphModel-567"><span class="linenos">567</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel-568"><a href="#AbstractGraphModel-568"><span class="linenos">568</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel-569"><a href="#AbstractGraphModel-569"><span class="linenos">569</span></a>                <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">UPDATE_EDGE_DIRECTED</span><span class="p">:</span>
</span><span id="AbstractGraphModel-570"><a href="#AbstractGraphModel-570"><span class="linenos">570</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">):</span>
</span><span id="AbstractGraphModel-571"><a href="#AbstractGraphModel-571"><span class="linenos">571</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="AbstractGraphModel-572"><a href="#AbstractGraphModel-572"><span class="linenos">572</span></a>                            <span class="sa">f</span><span class="s2">&quot;Tried to update directed edge </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. But it does not exist.&quot;</span>
</span><span id="AbstractGraphModel-573"><a href="#AbstractGraphModel-573"><span class="linenos">573</span></a>                        <span class="p">)</span>
</span><span id="AbstractGraphModel-574"><a href="#AbstractGraphModel-574"><span class="linenos">574</span></a>                        <span class="k">continue</span>
</span><span id="AbstractGraphModel-575"><a href="#AbstractGraphModel-575"><span class="linenos">575</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">update_directed_edge</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</span><span id="AbstractGraphModel-576"><a href="#AbstractGraphModel-576"><span class="linenos">576</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel-577"><a href="#AbstractGraphModel-577"><span class="linenos">577</span></a>                <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">DO_NOTHING</span><span class="p">:</span>
</span><span id="AbstractGraphModel-578"><a href="#AbstractGraphModel-578"><span class="linenos">578</span></a>                    <span class="k">continue</span>
</span><span id="AbstractGraphModel-579"><a href="#AbstractGraphModel-579"><span class="linenos">579</span></a>                <span class="k">elif</span> <span class="n">i</span><span class="o">.</span><span class="n">action</span> <span class="o">==</span> <span class="n">TestResultAction</span><span class="o">.</span><span class="n">REMOVE_EDGE_DIRECTED</span><span class="p">:</span>
</span><span id="AbstractGraphModel-580"><a href="#AbstractGraphModel-580"><span class="linenos">580</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">directed_edge_exists</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">):</span>
</span><span id="AbstractGraphModel-581"><a href="#AbstractGraphModel-581"><span class="linenos">581</span></a>                        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
</span><span id="AbstractGraphModel-582"><a href="#AbstractGraphModel-582"><span class="linenos">582</span></a>                            <span class="sa">f</span><span class="s2">&quot;Tried to remove directed edge </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> -&gt; </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">. But it does not exist.&quot;</span>
</span><span id="AbstractGraphModel-583"><a href="#AbstractGraphModel-583"><span class="linenos">583</span></a>                        <span class="p">)</span>
</span><span id="AbstractGraphModel-584"><a href="#AbstractGraphModel-584"><span class="linenos">584</span></a>                        <span class="k">continue</span>
</span><span id="AbstractGraphModel-585"><a href="#AbstractGraphModel-585"><span class="linenos">585</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">remove_directed_edge</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</span><span id="AbstractGraphModel-586"><a href="#AbstractGraphModel-586"><span class="linenos">586</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge_history</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel-587"><a href="#AbstractGraphModel-587"><span class="linenos">587</span></a>
</span><span id="AbstractGraphModel-588"><a href="#AbstractGraphModel-588"><span class="linenos">588</span></a>                <span class="c1"># add the action to the actions history</span>
</span><span id="AbstractGraphModel-589"><a href="#AbstractGraphModel-589"><span class="linenos">589</span></a>                <span class="n">actions_taken</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel-590"><a href="#AbstractGraphModel-590"><span class="linenos">590</span></a>
</span><span id="AbstractGraphModel-591"><a href="#AbstractGraphModel-591"><span class="linenos">591</span></a>        <span class="k">return</span> <span class="n">actions_taken</span>
</span><span id="AbstractGraphModel-592"><a href="#AbstractGraphModel-592"><span class="linenos">592</span></a>
</span><span id="AbstractGraphModel-593"><a href="#AbstractGraphModel-593"><span class="linenos">593</span></a>    <span class="k">def</span> <span class="nf">execute_pipeline_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_fn</span><span class="p">:</span> <span class="n">IndependenceTestInterface</span><span class="p">):</span>
</span><span id="AbstractGraphModel-594"><a href="#AbstractGraphModel-594"><span class="linenos">594</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-595"><a href="#AbstractGraphModel-595"><span class="linenos">595</span></a><span class="sd">        Execute a single pipeline_step on the graph. either in parallel or in a single process depending on the test_fn.parallel flag</span>
</span><span id="AbstractGraphModel-596"><a href="#AbstractGraphModel-596"><span class="linenos">596</span></a><span class="sd">        :param test_fn: the test function</span>
</span><span id="AbstractGraphModel-597"><a href="#AbstractGraphModel-597"><span class="linenos">597</span></a><span class="sd">        :param threshold: the threshold</span>
</span><span id="AbstractGraphModel-598"><a href="#AbstractGraphModel-598"><span class="linenos">598</span></a><span class="sd">        :return:</span>
</span><span id="AbstractGraphModel-599"><a href="#AbstractGraphModel-599"><span class="linenos">599</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel-600"><a href="#AbstractGraphModel-600"><span class="linenos">600</span></a>        <span class="n">actions_taken</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AbstractGraphModel-601"><a href="#AbstractGraphModel-601"><span class="linenos">601</span></a>
</span><span id="AbstractGraphModel-602"><a href="#AbstractGraphModel-602"><span class="linenos">602</span></a>        <span class="c1"># initialize the worker pool (we currently use all available cores * 2)</span>
</span><span id="AbstractGraphModel-603"><a href="#AbstractGraphModel-603"><span class="linenos">603</span></a>
</span><span id="AbstractGraphModel-604"><a href="#AbstractGraphModel-604"><span class="linenos">604</span></a>        <span class="c1"># run all combinations in parallel except if the number of combinations is smaller then the chunk size</span>
</span><span id="AbstractGraphModel-605"><a href="#AbstractGraphModel-605"><span class="linenos">605</span></a>        <span class="c1"># because then we would create more overhead then we would definetly gain from parallel processing</span>
</span><span id="AbstractGraphModel-606"><a href="#AbstractGraphModel-606"><span class="linenos">606</span></a>        <span class="k">if</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
</span><span id="AbstractGraphModel-607"><a href="#AbstractGraphModel-607"><span class="linenos">607</span></a>            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">imap_unordered</span><span class="p">(</span>
</span><span id="AbstractGraphModel-608"><a href="#AbstractGraphModel-608"><span class="linenos">608</span></a>                <span class="n">unpack_run</span><span class="p">,</span>
</span><span id="AbstractGraphModel-609"><a href="#AbstractGraphModel-609"><span class="linenos">609</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_format_yield</span><span class="p">(</span>
</span><span id="AbstractGraphModel-610"><a href="#AbstractGraphModel-610"><span class="linenos">610</span></a>                    <span class="n">test_fn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AbstractGraphModel-611"><a href="#AbstractGraphModel-611"><span class="linenos">611</span></a>                <span class="p">),</span>
</span><span id="AbstractGraphModel-612"><a href="#AbstractGraphModel-612"><span class="linenos">612</span></a>                <span class="n">chunksize</span><span class="o">=</span><span class="n">test_fn</span><span class="o">.</span><span class="n">chunk_size_parallel_processing</span><span class="p">,</span>
</span><span id="AbstractGraphModel-613"><a href="#AbstractGraphModel-613"><span class="linenos">613</span></a>            <span class="p">):</span>
</span><span id="AbstractGraphModel-614"><a href="#AbstractGraphModel-614"><span class="linenos">614</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="AbstractGraphModel-615"><a href="#AbstractGraphModel-615"><span class="linenos">615</span></a>                    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>
</span><span id="AbstractGraphModel-616"><a href="#AbstractGraphModel-616"><span class="linenos">616</span></a>                <span class="n">actions_taken</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_take_action</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span><span id="AbstractGraphModel-617"><a href="#AbstractGraphModel-617"><span class="linenos">617</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AbstractGraphModel-618"><a href="#AbstractGraphModel-618"><span class="linenos">618</span></a>            <span class="k">if</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">chunked</span><span class="p">:</span>
</span><span id="AbstractGraphModel-619"><a href="#AbstractGraphModel-619"><span class="linenos">619</span></a>                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">):</span>
</span><span id="AbstractGraphModel-620"><a href="#AbstractGraphModel-620"><span class="linenos">620</span></a>                    <span class="n">iterator</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AbstractGraphModel-621"><a href="#AbstractGraphModel-621"><span class="linenos">621</span></a>                        <span class="n">unpack_run</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel-622"><a href="#AbstractGraphModel-622"><span class="linenos">622</span></a>                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[[</span><span class="n">test_fn</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">c</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">]</span>
</span><span id="AbstractGraphModel-623"><a href="#AbstractGraphModel-623"><span class="linenos">623</span></a>                    <span class="p">]</span>
</span><span id="AbstractGraphModel-624"><a href="#AbstractGraphModel-624"><span class="linenos">624</span></a>                    <span class="n">actions_taken</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_take_action</span><span class="p">(</span><span class="n">iterator</span><span class="p">))</span>
</span><span id="AbstractGraphModel-625"><a href="#AbstractGraphModel-625"><span class="linenos">625</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AbstractGraphModel-626"><a href="#AbstractGraphModel-626"><span class="linenos">626</span></a>                <span class="n">iterator</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AbstractGraphModel-627"><a href="#AbstractGraphModel-627"><span class="linenos">627</span></a>                    <span class="n">unpack_run</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel-628"><a href="#AbstractGraphModel-628"><span class="linenos">628</span></a>                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span>
</span><span id="AbstractGraphModel-629"><a href="#AbstractGraphModel-629"><span class="linenos">629</span></a>                        <span class="p">[</span><span class="n">test_fn</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">]</span>
</span><span id="AbstractGraphModel-630"><a href="#AbstractGraphModel-630"><span class="linenos">630</span></a>                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AbstractGraphModel-631"><a href="#AbstractGraphModel-631"><span class="linenos">631</span></a>                    <span class="p">]</span>
</span><span id="AbstractGraphModel-632"><a href="#AbstractGraphModel-632"><span class="linenos">632</span></a>                <span class="p">]</span>
</span><span id="AbstractGraphModel-633"><a href="#AbstractGraphModel-633"><span class="linenos">633</span></a>                <span class="n">actions_taken</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_take_action</span><span class="p">(</span><span class="n">iterator</span><span class="p">))</span>
</span><span id="AbstractGraphModel-634"><a href="#AbstractGraphModel-634"><span class="linenos">634</span></a>
</span><span id="AbstractGraphModel-635"><a href="#AbstractGraphModel-635"><span class="linenos">635</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">action_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="AbstractGraphModel-636"><a href="#AbstractGraphModel-636"><span class="linenos">636</span></a>            <span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">test_fn</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">actions_taken</span><span class="p">}</span>
</span><span id="AbstractGraphModel-637"><a href="#AbstractGraphModel-637"><span class="linenos">637</span></a>        <span class="p">)</span>
</span><span id="AbstractGraphModel-638"><a href="#AbstractGraphModel-638"><span class="linenos">638</span></a>
</span><span id="AbstractGraphModel-639"><a href="#AbstractGraphModel-639"><span class="linenos">639</span></a>        <span class="k">return</span> <span class="n">actions_taken</span>
</span></pre></div>


            <div class="docstring"><p>The graph model is the main class of causy. It is responsible for creating a graph from data and executing the pipeline_steps.</p>

<p>The graph model is responsible for the following tasks:</p>

<ul>
<li>Create a graph from data (create_graph_from_data)</li>
<li>Execute the pipeline_steps (execute_pipeline_steps)</li>
<li>Take actions on the graph (execute_pipeline_step &amp; _take_action which is called by execute_pipeline_step)</li>
</ul>

<p>It also initializes and takes care of the multiprocessing pool.</p>
</div>


                            <div id="AbstractGraphModel.__init__" class="classattr">
                                        <input id="AbstractGraphModel.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AbstractGraphModel</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">graph</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n"><a href="interfaces.html#IndependenceTestInterface">causy.interfaces.IndependenceTestInterface</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="AbstractGraphModel.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AbstractGraphModel.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AbstractGraphModel.__init__-451"><a href="#AbstractGraphModel.__init__-451"><span class="linenos">451</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="AbstractGraphModel.__init__-452"><a href="#AbstractGraphModel.__init__-452"><span class="linenos">452</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AbstractGraphModel.__init__-453"><a href="#AbstractGraphModel.__init__-453"><span class="linenos">453</span></a>        <span class="n">graph</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="AbstractGraphModel.__init__-454"><a href="#AbstractGraphModel.__init__-454"><span class="linenos">454</span></a>        <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="AbstractGraphModel.__init__-455"><a href="#AbstractGraphModel.__init__-455"><span class="linenos">455</span></a>    <span class="p">):</span>
</span><span id="AbstractGraphModel.__init__-456"><a href="#AbstractGraphModel.__init__-456"><span class="linenos">456</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
</span><span id="AbstractGraphModel.__init__-457"><a href="#AbstractGraphModel.__init__-457"><span class="linenos">457</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span> <span class="o">=</span> <span class="n">pipeline_steps</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="AbstractGraphModel.__init__-458"><a href="#AbstractGraphModel.__init__-458"><span class="linenos">458</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">mp</span><span class="o">.</span><span class="n">Pool</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AbstractGraphModel.pipeline_steps" class="classattr">
                                <div class="attr variable">
            <span class="name">pipeline_steps</span><span class="annotation">: List[<a href="interfaces.html#IndependenceTestInterface">causy.interfaces.IndependenceTestInterface</a>]</span>

        
    </div>
    <a class="headerlink" href="#AbstractGraphModel.pipeline_steps"></a>
    
    

                            </div>
                            <div id="AbstractGraphModel.graph" class="classattr">
                                <div class="attr variable">
            <span class="name">graph</span><span class="annotation">: <a href="interfaces.html#BaseGraphInterface">causy.interfaces.BaseGraphInterface</a></span>

        
    </div>
    <a class="headerlink" href="#AbstractGraphModel.graph"></a>
    
    

                            </div>
                            <div id="AbstractGraphModel.pool" class="classattr">
                                <div class="attr variable">
            <span class="name">pool</span><span class="annotation">: &lt;bound method BaseContext.Pool of &lt;multiprocessing.context.DefaultContext object at 0x10c386e50&gt;&gt;</span>

        
    </div>
    <a class="headerlink" href="#AbstractGraphModel.pool"></a>
    
    

                            </div>
                            <div id="AbstractGraphModel.create_graph_from_data" class="classattr">
                                        <input id="AbstractGraphModel.create_graph_from_data-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_graph_from_data</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AbstractGraphModel.create_graph_from_data-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AbstractGraphModel.create_graph_from_data"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AbstractGraphModel.create_graph_from_data-460"><a href="#AbstractGraphModel.create_graph_from_data-460"><span class="linenos">460</span></a>    <span class="k">def</span> <span class="nf">create_graph_from_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]):</span>
</span><span id="AbstractGraphModel.create_graph_from_data-461"><a href="#AbstractGraphModel.create_graph_from_data-461"><span class="linenos">461</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel.create_graph_from_data-462"><a href="#AbstractGraphModel.create_graph_from_data-462"><span class="linenos">462</span></a><span class="sd">        Create a graph from data</span>
</span><span id="AbstractGraphModel.create_graph_from_data-463"><a href="#AbstractGraphModel.create_graph_from_data-463"><span class="linenos">463</span></a><span class="sd">        :param data: is a list of dictionaries</span>
</span><span id="AbstractGraphModel.create_graph_from_data-464"><a href="#AbstractGraphModel.create_graph_from_data-464"><span class="linenos">464</span></a><span class="sd">        :return:</span>
</span><span id="AbstractGraphModel.create_graph_from_data-465"><a href="#AbstractGraphModel.create_graph_from_data-465"><span class="linenos">465</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel.create_graph_from_data-466"><a href="#AbstractGraphModel.create_graph_from_data-466"><span class="linenos">466</span></a>        <span class="c1"># initialize nodes</span>
</span><span id="AbstractGraphModel.create_graph_from_data-467"><a href="#AbstractGraphModel.create_graph_from_data-467"><span class="linenos">467</span></a>        <span class="n">keys</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</span><span id="AbstractGraphModel.create_graph_from_data-468"><a href="#AbstractGraphModel.create_graph_from_data-468"><span class="linenos">468</span></a>        <span class="n">nodes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="AbstractGraphModel.create_graph_from_data-469"><a href="#AbstractGraphModel.create_graph_from_data-469"><span class="linenos">469</span></a>
</span><span id="AbstractGraphModel.create_graph_from_data-470"><a href="#AbstractGraphModel.create_graph_from_data-470"><span class="linenos">470</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="AbstractGraphModel.create_graph_from_data-471"><a href="#AbstractGraphModel.create_graph_from_data-471"><span class="linenos">471</span></a>            <span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AbstractGraphModel.create_graph_from_data-472"><a href="#AbstractGraphModel.create_graph_from_data-472"><span class="linenos">472</span></a>
</span><span id="AbstractGraphModel.create_graph_from_data-473"><a href="#AbstractGraphModel.create_graph_from_data-473"><span class="linenos">473</span></a>        <span class="c1"># load nodes into node dict</span>
</span><span id="AbstractGraphModel.create_graph_from_data-474"><a href="#AbstractGraphModel.create_graph_from_data-474"><span class="linenos">474</span></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
</span><span id="AbstractGraphModel.create_graph_from_data-475"><a href="#AbstractGraphModel.create_graph_from_data-475"><span class="linenos">475</span></a>            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="AbstractGraphModel.create_graph_from_data-476"><a href="#AbstractGraphModel.create_graph_from_data-476"><span class="linenos">476</span></a>                <span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="AbstractGraphModel.create_graph_from_data-477"><a href="#AbstractGraphModel.create_graph_from_data-477"><span class="linenos">477</span></a>
</span><span id="AbstractGraphModel.create_graph_from_data-478"><a href="#AbstractGraphModel.create_graph_from_data-478"><span class="linenos">478</span></a>        <span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
</span><span id="AbstractGraphModel.create_graph_from_data-479"><a href="#AbstractGraphModel.create_graph_from_data-479"><span class="linenos">479</span></a>        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span><span id="AbstractGraphModel.create_graph_from_data-480"><a href="#AbstractGraphModel.create_graph_from_data-480"><span class="linenos">480</span></a>            <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">nodes</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
</span><span id="AbstractGraphModel.create_graph_from_data-481"><a href="#AbstractGraphModel.create_graph_from_data-481"><span class="linenos">481</span></a>
</span><span id="AbstractGraphModel.create_graph_from_data-482"><a href="#AbstractGraphModel.create_graph_from_data-482"><span class="linenos">482</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">graph</span>
</span><span id="AbstractGraphModel.create_graph_from_data-483"><a href="#AbstractGraphModel.create_graph_from_data-483"><span class="linenos">483</span></a>        <span class="k">return</span> <span class="n">graph</span>
</span></pre></div>


            <div class="docstring"><p>Create a graph from data</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>data</strong>:  is a list of dictionaries</li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="AbstractGraphModel.create_all_possible_edges" class="classattr">
                                        <input id="AbstractGraphModel.create_all_possible_edges-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">create_all_possible_edges</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AbstractGraphModel.create_all_possible_edges-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AbstractGraphModel.create_all_possible_edges"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AbstractGraphModel.create_all_possible_edges-485"><a href="#AbstractGraphModel.create_all_possible_edges-485"><span class="linenos">485</span></a>    <span class="k">def</span> <span class="nf">create_all_possible_edges</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-486"><a href="#AbstractGraphModel.create_all_possible_edges-486"><span class="linenos">486</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-487"><a href="#AbstractGraphModel.create_all_possible_edges-487"><span class="linenos">487</span></a><span class="sd">        Create all possible edges on a graph</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-488"><a href="#AbstractGraphModel.create_all_possible_edges-488"><span class="linenos">488</span></a><span class="sd">        TODO: replace me with the skeleton builders</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-489"><a href="#AbstractGraphModel.create_all_possible_edges-489"><span class="linenos">489</span></a><span class="sd">        :return:</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-490"><a href="#AbstractGraphModel.create_all_possible_edges-490"><span class="linenos">490</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-491"><a href="#AbstractGraphModel.create_all_possible_edges-491"><span class="linenos">491</span></a>        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-492"><a href="#AbstractGraphModel.create_all_possible_edges-492"><span class="linenos">492</span></a>            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-493"><a href="#AbstractGraphModel.create_all_possible_edges-493"><span class="linenos">493</span></a>                <span class="k">if</span> <span class="n">u</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-494"><a href="#AbstractGraphModel.create_all_possible_edges-494"><span class="linenos">494</span></a>                    <span class="k">continue</span>
</span><span id="AbstractGraphModel.create_all_possible_edges-495"><a href="#AbstractGraphModel.create_all_possible_edges-495"><span class="linenos">495</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="p">{})</span>
</span></pre></div>


            <div class="docstring"><p>Create all possible edges on a graph
TODO: replace me with the skeleton builders</p>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="AbstractGraphModel.execute_pipeline_steps" class="classattr">
                                        <input id="AbstractGraphModel.execute_pipeline_steps-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">execute_pipeline_steps</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AbstractGraphModel.execute_pipeline_steps-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AbstractGraphModel.execute_pipeline_steps"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AbstractGraphModel.execute_pipeline_steps-497"><a href="#AbstractGraphModel.execute_pipeline_steps-497"><span class="linenos">497</span></a>    <span class="k">def</span> <span class="nf">execute_pipeline_steps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-498"><a href="#AbstractGraphModel.execute_pipeline_steps-498"><span class="linenos">498</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-499"><a href="#AbstractGraphModel.execute_pipeline_steps-499"><span class="linenos">499</span></a><span class="sd">        Execute all pipeline_steps</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-500"><a href="#AbstractGraphModel.execute_pipeline_steps-500"><span class="linenos">500</span></a><span class="sd">        :return: the steps taken during the step execution</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-501"><a href="#AbstractGraphModel.execute_pipeline_steps-501"><span class="linenos">501</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-502"><a href="#AbstractGraphModel.execute_pipeline_steps-502"><span class="linenos">502</span></a>        <span class="n">action_history</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-503"><a href="#AbstractGraphModel.execute_pipeline_steps-503"><span class="linenos">503</span></a>
</span><span id="AbstractGraphModel.execute_pipeline_steps-504"><a href="#AbstractGraphModel.execute_pipeline_steps-504"><span class="linenos">504</span></a>        <span class="k">for</span> <span class="nb">filter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span><span class="p">:</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-505"><a href="#AbstractGraphModel.execute_pipeline_steps-505"><span class="linenos">505</span></a>            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing pipeline step </span><span class="si">{</span><span class="nb">filter</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-506"><a href="#AbstractGraphModel.execute_pipeline_steps-506"><span class="linenos">506</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">filter</span><span class="p">,</span> <span class="n">LogicStepInterface</span><span class="p">):</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-507"><a href="#AbstractGraphModel.execute_pipeline_steps-507"><span class="linenos">507</span></a>                <span class="nb">filter</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-508"><a href="#AbstractGraphModel.execute_pipeline_steps-508"><span class="linenos">508</span></a>                <span class="k">continue</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-509"><a href="#AbstractGraphModel.execute_pipeline_steps-509"><span class="linenos">509</span></a>
</span><span id="AbstractGraphModel.execute_pipeline_steps-510"><a href="#AbstractGraphModel.execute_pipeline_steps-510"><span class="linenos">510</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">execute_pipeline_step</span><span class="p">(</span><span class="nb">filter</span><span class="p">)</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-511"><a href="#AbstractGraphModel.execute_pipeline_steps-511"><span class="linenos">511</span></a>            <span class="n">action_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-512"><a href="#AbstractGraphModel.execute_pipeline_steps-512"><span class="linenos">512</span></a>                <span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="nb">filter</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">result</span><span class="p">}</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-513"><a href="#AbstractGraphModel.execute_pipeline_steps-513"><span class="linenos">513</span></a>            <span class="p">)</span>
</span><span id="AbstractGraphModel.execute_pipeline_steps-514"><a href="#AbstractGraphModel.execute_pipeline_steps-514"><span class="linenos">514</span></a>
</span><span id="AbstractGraphModel.execute_pipeline_steps-515"><a href="#AbstractGraphModel.execute_pipeline_steps-515"><span class="linenos">515</span></a>        <span class="k">return</span> <span class="n">action_history</span>
</span></pre></div>


            <div class="docstring"><p>Execute all pipeline_steps</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>the steps taken during the step execution</p>
</blockquote>
</div>


                            </div>
                            <div id="AbstractGraphModel.execute_pipeline_step" class="classattr">
                                        <input id="AbstractGraphModel.execute_pipeline_step-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">execute_pipeline_step</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">test_fn</span><span class="p">:</span> <span class="n"><a href="interfaces.html#IndependenceTestInterface">causy.interfaces.IndependenceTestInterface</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AbstractGraphModel.execute_pipeline_step-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AbstractGraphModel.execute_pipeline_step"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AbstractGraphModel.execute_pipeline_step-593"><a href="#AbstractGraphModel.execute_pipeline_step-593"><span class="linenos">593</span></a>    <span class="k">def</span> <span class="nf">execute_pipeline_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_fn</span><span class="p">:</span> <span class="n">IndependenceTestInterface</span><span class="p">):</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-594"><a href="#AbstractGraphModel.execute_pipeline_step-594"><span class="linenos">594</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-595"><a href="#AbstractGraphModel.execute_pipeline_step-595"><span class="linenos">595</span></a><span class="sd">        Execute a single pipeline_step on the graph. either in parallel or in a single process depending on the test_fn.parallel flag</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-596"><a href="#AbstractGraphModel.execute_pipeline_step-596"><span class="linenos">596</span></a><span class="sd">        :param test_fn: the test function</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-597"><a href="#AbstractGraphModel.execute_pipeline_step-597"><span class="linenos">597</span></a><span class="sd">        :param threshold: the threshold</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-598"><a href="#AbstractGraphModel.execute_pipeline_step-598"><span class="linenos">598</span></a><span class="sd">        :return:</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-599"><a href="#AbstractGraphModel.execute_pipeline_step-599"><span class="linenos">599</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-600"><a href="#AbstractGraphModel.execute_pipeline_step-600"><span class="linenos">600</span></a>        <span class="n">actions_taken</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-601"><a href="#AbstractGraphModel.execute_pipeline_step-601"><span class="linenos">601</span></a>
</span><span id="AbstractGraphModel.execute_pipeline_step-602"><a href="#AbstractGraphModel.execute_pipeline_step-602"><span class="linenos">602</span></a>        <span class="c1"># initialize the worker pool (we currently use all available cores * 2)</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-603"><a href="#AbstractGraphModel.execute_pipeline_step-603"><span class="linenos">603</span></a>
</span><span id="AbstractGraphModel.execute_pipeline_step-604"><a href="#AbstractGraphModel.execute_pipeline_step-604"><span class="linenos">604</span></a>        <span class="c1"># run all combinations in parallel except if the number of combinations is smaller then the chunk size</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-605"><a href="#AbstractGraphModel.execute_pipeline_step-605"><span class="linenos">605</span></a>        <span class="c1"># because then we would create more overhead then we would definetly gain from parallel processing</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-606"><a href="#AbstractGraphModel.execute_pipeline_step-606"><span class="linenos">606</span></a>        <span class="k">if</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-607"><a href="#AbstractGraphModel.execute_pipeline_step-607"><span class="linenos">607</span></a>            <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">imap_unordered</span><span class="p">(</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-608"><a href="#AbstractGraphModel.execute_pipeline_step-608"><span class="linenos">608</span></a>                <span class="n">unpack_run</span><span class="p">,</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-609"><a href="#AbstractGraphModel.execute_pipeline_step-609"><span class="linenos">609</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_format_yield</span><span class="p">(</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-610"><a href="#AbstractGraphModel.execute_pipeline_step-610"><span class="linenos">610</span></a>                    <span class="n">test_fn</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-611"><a href="#AbstractGraphModel.execute_pipeline_step-611"><span class="linenos">611</span></a>                <span class="p">),</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-612"><a href="#AbstractGraphModel.execute_pipeline_step-612"><span class="linenos">612</span></a>                <span class="n">chunksize</span><span class="o">=</span><span class="n">test_fn</span><span class="o">.</span><span class="n">chunk_size_parallel_processing</span><span class="p">,</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-613"><a href="#AbstractGraphModel.execute_pipeline_step-613"><span class="linenos">613</span></a>            <span class="p">):</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-614"><a href="#AbstractGraphModel.execute_pipeline_step-614"><span class="linenos">614</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-615"><a href="#AbstractGraphModel.execute_pipeline_step-615"><span class="linenos">615</span></a>                    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-616"><a href="#AbstractGraphModel.execute_pipeline_step-616"><span class="linenos">616</span></a>                <span class="n">actions_taken</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_take_action</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-617"><a href="#AbstractGraphModel.execute_pipeline_step-617"><span class="linenos">617</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-618"><a href="#AbstractGraphModel.execute_pipeline_step-618"><span class="linenos">618</span></a>            <span class="k">if</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">chunked</span><span class="p">:</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-619"><a href="#AbstractGraphModel.execute_pipeline_step-619"><span class="linenos">619</span></a>                <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">):</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-620"><a href="#AbstractGraphModel.execute_pipeline_step-620"><span class="linenos">620</span></a>                    <span class="n">iterator</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-621"><a href="#AbstractGraphModel.execute_pipeline_step-621"><span class="linenos">621</span></a>                        <span class="n">unpack_run</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-622"><a href="#AbstractGraphModel.execute_pipeline_step-622"><span class="linenos">622</span></a>                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[[</span><span class="n">test_fn</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">c</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">]</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-623"><a href="#AbstractGraphModel.execute_pipeline_step-623"><span class="linenos">623</span></a>                    <span class="p">]</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-624"><a href="#AbstractGraphModel.execute_pipeline_step-624"><span class="linenos">624</span></a>                    <span class="n">actions_taken</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_take_action</span><span class="p">(</span><span class="n">iterator</span><span class="p">))</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-625"><a href="#AbstractGraphModel.execute_pipeline_step-625"><span class="linenos">625</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-626"><a href="#AbstractGraphModel.execute_pipeline_step-626"><span class="linenos">626</span></a>                <span class="n">iterator</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-627"><a href="#AbstractGraphModel.execute_pipeline_step-627"><span class="linenos">627</span></a>                    <span class="n">unpack_run</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-628"><a href="#AbstractGraphModel.execute_pipeline_step-628"><span class="linenos">628</span></a>                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-629"><a href="#AbstractGraphModel.execute_pipeline_step-629"><span class="linenos">629</span></a>                        <span class="p">[</span><span class="n">test_fn</span><span class="p">,</span> <span class="p">[</span><span class="o">*</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">]</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-630"><a href="#AbstractGraphModel.execute_pipeline_step-630"><span class="linenos">630</span></a>                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">test_fn</span><span class="o">.</span><span class="n">generator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-631"><a href="#AbstractGraphModel.execute_pipeline_step-631"><span class="linenos">631</span></a>                    <span class="p">]</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-632"><a href="#AbstractGraphModel.execute_pipeline_step-632"><span class="linenos">632</span></a>                <span class="p">]</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-633"><a href="#AbstractGraphModel.execute_pipeline_step-633"><span class="linenos">633</span></a>                <span class="n">actions_taken</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_take_action</span><span class="p">(</span><span class="n">iterator</span><span class="p">))</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-634"><a href="#AbstractGraphModel.execute_pipeline_step-634"><span class="linenos">634</span></a>
</span><span id="AbstractGraphModel.execute_pipeline_step-635"><a href="#AbstractGraphModel.execute_pipeline_step-635"><span class="linenos">635</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">action_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-636"><a href="#AbstractGraphModel.execute_pipeline_step-636"><span class="linenos">636</span></a>            <span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">test_fn</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="n">actions_taken</span><span class="p">}</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-637"><a href="#AbstractGraphModel.execute_pipeline_step-637"><span class="linenos">637</span></a>        <span class="p">)</span>
</span><span id="AbstractGraphModel.execute_pipeline_step-638"><a href="#AbstractGraphModel.execute_pipeline_step-638"><span class="linenos">638</span></a>
</span><span id="AbstractGraphModel.execute_pipeline_step-639"><a href="#AbstractGraphModel.execute_pipeline_step-639"><span class="linenos">639</span></a>        <span class="k">return</span> <span class="n">actions_taken</span>
</span></pre></div>


            <div class="docstring"><p>Execute a single pipeline_step on the graph. either in parallel or in a single process depending on the test_fn.parallel flag</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>test_fn</strong>:  the test function</li>
<li><strong>threshold</strong>:  the threshold</li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                </section>
                <section id="graph_model_factory">
                            <input id="graph_model_factory-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">graph_model_factory</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n"><a href="interfaces.html#IndependenceTestInterface">causy.interfaces.IndependenceTestInterface</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">type</span><span class="p">[</span><span class="n"><a href="#AbstractGraphModel">AbstractGraphModel</a></span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="graph_model_factory-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#graph_model_factory"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="graph_model_factory-642"><a href="#graph_model_factory-642"><span class="linenos">642</span></a><span class="k">def</span> <span class="nf">graph_model_factory</span><span class="p">(</span>
</span><span id="graph_model_factory-643"><a href="#graph_model_factory-643"><span class="linenos">643</span></a>    <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="graph_model_factory-644"><a href="#graph_model_factory-644"><span class="linenos">644</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">AbstractGraphModel</span><span class="p">]:</span>
</span><span id="graph_model_factory-645"><a href="#graph_model_factory-645"><span class="linenos">645</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="graph_model_factory-646"><a href="#graph_model_factory-646"><span class="linenos">646</span></a><span class="sd">    Create a graph model based on a List of pipeline_steps</span>
</span><span id="graph_model_factory-647"><a href="#graph_model_factory-647"><span class="linenos">647</span></a><span class="sd">    :param pipeline_steps: a list of pipeline_steps which should be applied to the graph</span>
</span><span id="graph_model_factory-648"><a href="#graph_model_factory-648"><span class="linenos">648</span></a><span class="sd">    :return: the graph model</span>
</span><span id="graph_model_factory-649"><a href="#graph_model_factory-649"><span class="linenos">649</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="graph_model_factory-650"><a href="#graph_model_factory-650"><span class="linenos">650</span></a>
</span><span id="graph_model_factory-651"><a href="#graph_model_factory-651"><span class="linenos">651</span></a>    <span class="k">class</span> <span class="nc">GraphModel</span><span class="p">(</span><span class="n">AbstractGraphModel</span><span class="p">):</span>
</span><span id="graph_model_factory-652"><a href="#graph_model_factory-652"><span class="linenos">652</span></a>        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="graph_model_factory-653"><a href="#graph_model_factory-653"><span class="linenos">653</span></a>            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="o">=</span><span class="n">pipeline_steps</span><span class="p">)</span>
</span><span id="graph_model_factory-654"><a href="#graph_model_factory-654"><span class="linenos">654</span></a>
</span><span id="graph_model_factory-655"><a href="#graph_model_factory-655"><span class="linenos">655</span></a>    <span class="k">return</span> <span class="n">GraphModel</span>
</span></pre></div>


            <div class="docstring"><p>Create a graph model based on a List of pipeline_steps</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>pipeline_steps</strong>:  a list of pipeline_steps which should be applied to the graph</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>the graph model</p>
</blockquote>
</div>


                </section>
                <section id="Loop">
                            <input id="Loop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Loop</span><wbr>(<span class="base"><a href="interfaces.html#LogicStepInterface">causy.interfaces.LogicStepInterface</a></span>):

                <label class="view-source-button" for="Loop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Loop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Loop-658"><a href="#Loop-658"><span class="linenos">658</span></a><span class="k">class</span> <span class="nc">Loop</span><span class="p">(</span><span class="n">LogicStepInterface</span><span class="p">):</span>
</span><span id="Loop-659"><a href="#Loop-659"><span class="linenos">659</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Loop-660"><a href="#Loop-660"><span class="linenos">660</span></a><span class="sd">    A loop which executes a list of pipeline_steps until the exit_condition is met.</span>
</span><span id="Loop-661"><a href="#Loop-661"><span class="linenos">661</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Loop-662"><a href="#Loop-662"><span class="linenos">662</span></a>
</span><span id="Loop-663"><a href="#Loop-663"><span class="linenos">663</span></a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span>
</span><span id="Loop-664"><a href="#Loop-664"><span class="linenos">664</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="n">BaseGraphInterface</span><span class="p">,</span> <span class="n">graph_model_instance_</span><span class="p">:</span> <span class="n">GraphModelInterface</span>
</span><span id="Loop-665"><a href="#Loop-665"><span class="linenos">665</span></a>    <span class="p">):</span>
</span><span id="Loop-666"><a href="#Loop-666"><span class="linenos">666</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Loop-667"><a href="#Loop-667"><span class="linenos">667</span></a><span class="sd">        Executes the loop til self.exit_condition is met</span>
</span><span id="Loop-668"><a href="#Loop-668"><span class="linenos">668</span></a><span class="sd">        :param graph:</span>
</span><span id="Loop-669"><a href="#Loop-669"><span class="linenos">669</span></a><span class="sd">        :param graph_model_instance_:</span>
</span><span id="Loop-670"><a href="#Loop-670"><span class="linenos">670</span></a><span class="sd">        :return:</span>
</span><span id="Loop-671"><a href="#Loop-671"><span class="linenos">671</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Loop-672"><a href="#Loop-672"><span class="linenos">672</span></a>        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Loop-673"><a href="#Loop-673"><span class="linenos">673</span></a>        <span class="n">steps</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Loop-674"><a href="#Loop-674"><span class="linenos">674</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit_condition</span><span class="p">(</span>
</span><span id="Loop-675"><a href="#Loop-675"><span class="linenos">675</span></a>            <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">,</span>
</span><span id="Loop-676"><a href="#Loop-676"><span class="linenos">676</span></a>            <span class="n">graph_model_instance_</span><span class="o">=</span><span class="n">graph_model_instance_</span><span class="p">,</span>
</span><span id="Loop-677"><a href="#Loop-677"><span class="linenos">677</span></a>            <span class="n">actions_taken</span><span class="o">=</span><span class="n">steps</span><span class="p">,</span>
</span><span id="Loop-678"><a href="#Loop-678"><span class="linenos">678</span></a>            <span class="n">iteration</span><span class="o">=</span><span class="n">n</span><span class="p">,</span>
</span><span id="Loop-679"><a href="#Loop-679"><span class="linenos">679</span></a>        <span class="p">):</span>
</span><span id="Loop-680"><a href="#Loop-680"><span class="linenos">680</span></a>            <span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Loop-681"><a href="#Loop-681"><span class="linenos">681</span></a>            <span class="k">for</span> <span class="n">pipeline_step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span><span class="p">:</span>
</span><span id="Loop-682"><a href="#Loop-682"><span class="linenos">682</span></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">graph_model_instance_</span><span class="o">.</span><span class="n">execute_pipeline_step</span><span class="p">(</span><span class="n">pipeline_step</span><span class="p">)</span>
</span><span id="Loop-683"><a href="#Loop-683"><span class="linenos">683</span></a>                <span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="Loop-684"><a href="#Loop-684"><span class="linenos">684</span></a>            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Loop-685"><a href="#Loop-685"><span class="linenos">685</span></a>
</span><span id="Loop-686"><a href="#Loop-686"><span class="linenos">686</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Loop-687"><a href="#Loop-687"><span class="linenos">687</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Loop-688"><a href="#Loop-688"><span class="linenos">688</span></a>        <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Loop-689"><a href="#Loop-689"><span class="linenos">689</span></a>        <span class="n">exit_condition</span><span class="p">:</span> <span class="n">ExitConditionInterface</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Loop-690"><a href="#Loop-690"><span class="linenos">690</span></a>    <span class="p">):</span>
</span><span id="Loop-691"><a href="#Loop-691"><span class="linenos">691</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="Loop-692"><a href="#Loop-692"><span class="linenos">692</span></a>        <span class="c1"># TODO check if this is a good idea</span>
</span><span id="Loop-693"><a href="#Loop-693"><span class="linenos">693</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exit_condition</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Loop-694"><a href="#Loop-694"><span class="linenos">694</span></a>            <span class="n">exit_condition</span> <span class="o">=</span> <span class="n">load_pipeline_artefact_by_definition</span><span class="p">(</span><span class="n">exit_condition</span><span class="p">)</span>
</span><span id="Loop-695"><a href="#Loop-695"><span class="linenos">695</span></a>
</span><span id="Loop-696"><a href="#Loop-696"><span class="linenos">696</span></a>        <span class="c1"># TODO: check if this is a good idea</span>
</span><span id="Loop-697"><a href="#Loop-697"><span class="linenos">697</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Loop-698"><a href="#Loop-698"><span class="linenos">698</span></a>            <span class="n">pipeline_steps</span> <span class="o">=</span> <span class="n">load_pipeline_steps_by_definition</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="p">)</span>
</span><span id="Loop-699"><a href="#Loop-699"><span class="linenos">699</span></a>
</span><span id="Loop-700"><a href="#Loop-700"><span class="linenos">700</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span> <span class="o">=</span> <span class="n">pipeline_steps</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="Loop-701"><a href="#Loop-701"><span class="linenos">701</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">exit_condition</span> <span class="o">=</span> <span class="n">exit_condition</span>
</span></pre></div>


            <div class="docstring"><p>A loop which executes a list of pipeline_steps until the exit_condition is met.</p>
</div>


                            <div id="Loop.__init__" class="classattr">
                                        <input id="Loop.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Loop</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n"><a href="interfaces.html#IndependenceTestInterface">causy.interfaces.IndependenceTestInterface</a></span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">exit_condition</span><span class="p">:</span> <span class="n"><a href="interfaces.html#ExitConditionInterface">causy.interfaces.ExitConditionInterface</a></span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Loop.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Loop.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Loop.__init__-686"><a href="#Loop.__init__-686"><span class="linenos">686</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="Loop.__init__-687"><a href="#Loop.__init__-687"><span class="linenos">687</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Loop.__init__-688"><a href="#Loop.__init__-688"><span class="linenos">688</span></a>        <span class="n">pipeline_steps</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">IndependenceTestInterface</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Loop.__init__-689"><a href="#Loop.__init__-689"><span class="linenos">689</span></a>        <span class="n">exit_condition</span><span class="p">:</span> <span class="n">ExitConditionInterface</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="Loop.__init__-690"><a href="#Loop.__init__-690"><span class="linenos">690</span></a>    <span class="p">):</span>
</span><span id="Loop.__init__-691"><a href="#Loop.__init__-691"><span class="linenos">691</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="Loop.__init__-692"><a href="#Loop.__init__-692"><span class="linenos">692</span></a>        <span class="c1"># TODO check if this is a good idea</span>
</span><span id="Loop.__init__-693"><a href="#Loop.__init__-693"><span class="linenos">693</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">exit_condition</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Loop.__init__-694"><a href="#Loop.__init__-694"><span class="linenos">694</span></a>            <span class="n">exit_condition</span> <span class="o">=</span> <span class="n">load_pipeline_artefact_by_definition</span><span class="p">(</span><span class="n">exit_condition</span><span class="p">)</span>
</span><span id="Loop.__init__-695"><a href="#Loop.__init__-695"><span class="linenos">695</span></a>
</span><span id="Loop.__init__-696"><a href="#Loop.__init__-696"><span class="linenos">696</span></a>        <span class="c1"># TODO: check if this is a good idea</span>
</span><span id="Loop.__init__-697"><a href="#Loop.__init__-697"><span class="linenos">697</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
</span><span id="Loop.__init__-698"><a href="#Loop.__init__-698"><span class="linenos">698</span></a>            <span class="n">pipeline_steps</span> <span class="o">=</span> <span class="n">load_pipeline_steps_by_definition</span><span class="p">(</span><span class="n">pipeline_steps</span><span class="p">)</span>
</span><span id="Loop.__init__-699"><a href="#Loop.__init__-699"><span class="linenos">699</span></a>
</span><span id="Loop.__init__-700"><a href="#Loop.__init__-700"><span class="linenos">700</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span> <span class="o">=</span> <span class="n">pipeline_steps</span> <span class="ow">or</span> <span class="p">[]</span>
</span><span id="Loop.__init__-701"><a href="#Loop.__init__-701"><span class="linenos">701</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">exit_condition</span> <span class="o">=</span> <span class="n">exit_condition</span>
</span></pre></div>


    

                            </div>
                            <div id="Loop.execute" class="classattr">
                                        <input id="Loop.execute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">execute</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">graph</span><span class="p">:</span> <span class="n"><a href="interfaces.html#BaseGraphInterface">causy.interfaces.BaseGraphInterface</a></span>,</span><span class="param">	<span class="n">graph_model_instance_</span><span class="p">:</span> <span class="n"><a href="interfaces.html#GraphModelInterface">causy.interfaces.GraphModelInterface</a></span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Loop.execute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Loop.execute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Loop.execute-663"><a href="#Loop.execute-663"><span class="linenos">663</span></a>    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span>
</span><span id="Loop.execute-664"><a href="#Loop.execute-664"><span class="linenos">664</span></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="n">BaseGraphInterface</span><span class="p">,</span> <span class="n">graph_model_instance_</span><span class="p">:</span> <span class="n">GraphModelInterface</span>
</span><span id="Loop.execute-665"><a href="#Loop.execute-665"><span class="linenos">665</span></a>    <span class="p">):</span>
</span><span id="Loop.execute-666"><a href="#Loop.execute-666"><span class="linenos">666</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Loop.execute-667"><a href="#Loop.execute-667"><span class="linenos">667</span></a><span class="sd">        Executes the loop til self.exit_condition is met</span>
</span><span id="Loop.execute-668"><a href="#Loop.execute-668"><span class="linenos">668</span></a><span class="sd">        :param graph:</span>
</span><span id="Loop.execute-669"><a href="#Loop.execute-669"><span class="linenos">669</span></a><span class="sd">        :param graph_model_instance_:</span>
</span><span id="Loop.execute-670"><a href="#Loop.execute-670"><span class="linenos">670</span></a><span class="sd">        :return:</span>
</span><span id="Loop.execute-671"><a href="#Loop.execute-671"><span class="linenos">671</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Loop.execute-672"><a href="#Loop.execute-672"><span class="linenos">672</span></a>        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Loop.execute-673"><a href="#Loop.execute-673"><span class="linenos">673</span></a>        <span class="n">steps</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Loop.execute-674"><a href="#Loop.execute-674"><span class="linenos">674</span></a>        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">exit_condition</span><span class="p">(</span>
</span><span id="Loop.execute-675"><a href="#Loop.execute-675"><span class="linenos">675</span></a>            <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">,</span>
</span><span id="Loop.execute-676"><a href="#Loop.execute-676"><span class="linenos">676</span></a>            <span class="n">graph_model_instance_</span><span class="o">=</span><span class="n">graph_model_instance_</span><span class="p">,</span>
</span><span id="Loop.execute-677"><a href="#Loop.execute-677"><span class="linenos">677</span></a>            <span class="n">actions_taken</span><span class="o">=</span><span class="n">steps</span><span class="p">,</span>
</span><span id="Loop.execute-678"><a href="#Loop.execute-678"><span class="linenos">678</span></a>            <span class="n">iteration</span><span class="o">=</span><span class="n">n</span><span class="p">,</span>
</span><span id="Loop.execute-679"><a href="#Loop.execute-679"><span class="linenos">679</span></a>        <span class="p">):</span>
</span><span id="Loop.execute-680"><a href="#Loop.execute-680"><span class="linenos">680</span></a>            <span class="n">steps</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Loop.execute-681"><a href="#Loop.execute-681"><span class="linenos">681</span></a>            <span class="k">for</span> <span class="n">pipeline_step</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipeline_steps</span><span class="p">:</span>
</span><span id="Loop.execute-682"><a href="#Loop.execute-682"><span class="linenos">682</span></a>                <span class="n">result</span> <span class="o">=</span> <span class="n">graph_model_instance_</span><span class="o">.</span><span class="n">execute_pipeline_step</span><span class="p">(</span><span class="n">pipeline_step</span><span class="p">)</span>
</span><span id="Loop.execute-683"><a href="#Loop.execute-683"><span class="linenos">683</span></a>                <span class="n">steps</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span id="Loop.execute-684"><a href="#Loop.execute-684"><span class="linenos">684</span></a>            <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Executes the loop til self.exit_condition is met</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>graph</strong>: </li>
<li><strong>graph_model_instance_</strong>: </li>
</ul>

<h6 id="returns">Returns</h6>
</div>


                            </div>
                            <div id="Loop.pipeline_steps" class="classattr">
                                <div class="attr variable">
            <span class="name">pipeline_steps</span>

        
    </div>
    <a class="headerlink" href="#Loop.pipeline_steps"></a>
    
    

                            </div>
                            <div id="Loop.exit_condition" class="classattr">
                                <div class="attr variable">
            <span class="name">exit_condition</span>

        
    </div>
    <a class="headerlink" href="#Loop.exit_condition"></a>
    
    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="serialization.html#SerializeMixin">causy.serialization.SerializeMixin</a></dt>
                                <dd id="Loop.serialize" class="function"><a href="serialization.html#SerializeMixin.serialize">serialize</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>